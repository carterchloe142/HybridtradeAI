(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,69547,e=>{"use strict";var t=e.i(91788);let r=(...e)=>e.filter((e,t,r)=>!!e&&r.indexOf(e)===t).join(" ");var n={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let a=(0,t.forwardRef)(({color:e="currentColor",size:a=24,strokeWidth:l=2,absoluteStrokeWidth:o,className:s="",children:i,iconNode:u,...c},d)=>(0,t.createElement)("svg",{ref:d,...n,width:a,height:a,stroke:e,strokeWidth:o?24*Number(l)/Number(a):l,className:r("lucide",s),...c},[...u.map(([e,r])=>(0,t.createElement)(e,r)),...Array.isArray(i)?i:[i]])),l=(e,n)=>{let l=(0,t.forwardRef)(({className:l,...o},s)=>(0,t.createElement)(a,{ref:s,iconNode:n,className:r(`lucide-${e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,l),...o}));return l.displayName=`${e}`,l};e.s(["default",()=>l],69547)},20955,(e,t,r)=>{var n={229:function(e){var t,r,n,a=e.exports={};function l(){throw Error("setTimeout has not been defined")}function o(){throw Error("clearTimeout has not been defined")}try{t="function"==typeof setTimeout?setTimeout:l}catch(e){t=l}try{r="function"==typeof clearTimeout?clearTimeout:o}catch(e){r=o}function s(e){if(t===setTimeout)return setTimeout(e,0);if((t===l||!t)&&setTimeout)return t=setTimeout,setTimeout(e,0);try{return t(e,0)}catch(r){try{return t.call(null,e,0)}catch(r){return t.call(this,e,0)}}}var i=[],u=!1,c=-1;function d(){u&&n&&(u=!1,n.length?i=n.concat(i):c=-1,i.length&&f())}function f(){if(!u){var e=s(d);u=!0;for(var t=i.length;t;){for(n=i,i=[];++c<t;)n&&n[c].run();c=-1,t=i.length}n=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function h(){}a.nextTick=function(e){var t=Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];i.push(new p(e,t)),1!==i.length||u||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=h,a.addListener=h,a.once=h,a.off=h,a.removeListener=h,a.removeAllListeners=h,a.emit=h,a.prependListener=h,a.prependOnceListener=h,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},a={};function l(e){var t=a[e];if(void 0!==t)return t.exports;var r=a[e]={exports:{}},o=!0;try{n[e](r,r.exports,l),o=!1}finally{o&&delete a[e]}return r.exports}l.ab="/ROOT/node_modules/next/dist/compiled/process/",t.exports=l(229)},50461,(e,t,r)=>{"use strict";var n,a;t.exports=(null==(n=e.g.process)?void 0:n.env)&&"object"==typeof(null==(a=e.g.process)?void 0:a.env)?e.g.process:e.r(20955)},77325,(e,t,r)=>{"use strict";var n=Symbol.for("react.element"),a=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),i=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),h=Symbol.iterator,y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},m=Object.assign,g={};function x(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||y}function b(){}function v(e,t,r){this.props=e,this.context=t,this.refs=g,this.updater=r||y}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},b.prototype=x.prototype;var w=v.prototype=new b;w.constructor=v,m(w,x.prototype),w.isPureReactComponent=!0;var j=Array.isArray,_=Object.prototype.hasOwnProperty,N={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var a,l={},o=null,s=null;if(null!=t)for(a in void 0!==t.ref&&(s=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,a)&&!k.hasOwnProperty(a)&&(l[a]=t[a]);var i=arguments.length-2;if(1===i)l.children=r;else if(1<i){for(var u=Array(i),c=0;c<i;c++)u[c]=arguments[c+2];l.children=u}if(e&&e.defaultProps)for(a in i=e.defaultProps)void 0===l[a]&&(l[a]=i[a]);return{$$typeof:n,type:e,key:o,ref:s,props:l,_owner:N.current}}function C(e){return"object"==typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function P(e,t){var r,n;return"object"==typeof e&&null!==e&&null!=e.key?(r=""+e.key,n={"=":"=0",":":"=2"},"$"+r.replace(/[=:]/g,function(e){return n[e]})):t.toString(36)}function $(e,t,r){if(null==e)return e;var l=[],o=0;return!function e(t,r,l,o,s){var i,u,c,d=typeof t;("undefined"===d||"boolean"===d)&&(t=null);var f=!1;if(null===t)f=!0;else switch(d){case"string":case"number":f=!0;break;case"object":switch(t.$$typeof){case n:case a:f=!0}}if(f)return s=s(f=t),t=""===o?"."+P(f,0):o,j(s)?(l="",null!=t&&(l=t.replace(E,"$&/")+"/"),e(s,r,l,"",function(e){return e})):null!=s&&(C(s)&&(i=s,u=l+(!s.key||f&&f.key===s.key?"":(""+s.key).replace(E,"$&/")+"/")+t,s={$$typeof:n,type:i.type,key:u,ref:i.ref,props:i.props,_owner:i._owner}),r.push(s)),1;if(f=0,o=""===o?".":o+":",j(t))for(var p=0;p<t.length;p++){var y=o+P(d=t[p],p);f+=e(d,r,l,y,s)}else if("function"==typeof(y=null===(c=t)||"object"!=typeof c?null:"function"==typeof(c=h&&c[h]||c["@@iterator"])?c:null))for(t=y.call(t),p=0;!(d=t.next()).done;)y=o+P(d=d.value,p++),f+=e(d,r,l,y,s);else if("object"===d)throw Error("Objects are not valid as a React child (found: "+("[object Object]"===(r=String(t))?"object with keys {"+Object.keys(t).join(", ")+"}":r)+"). If you meant to render a collection of children, use an array instead.");return f}(e,l,"","",function(e){return t.call(r,e,o++)}),l}function O(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){(0===e._status||-1===e._status)&&(e._status=1,e._result=t)},function(t){(0===e._status||-1===e._status)&&(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var T={current:null},R={transition:null};function I(){throw Error("act(...) is not supported in production builds of React.")}r.Children={map:$,forEach:function(e,t,r){$(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return $(e,function(){t++}),t},toArray:function(e){return $(e,function(e){return e})||[]},only:function(e){if(!C(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},r.Component=x,r.Fragment=l,r.Profiler=s,r.PureComponent=v,r.StrictMode=o,r.Suspense=d,r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED={ReactCurrentDispatcher:T,ReactCurrentBatchConfig:R,ReactCurrentOwner:N},r.act=I,r.cloneElement=function(e,t,r){if(null==e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=m({},e.props),l=e.key,o=e.ref,s=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,s=N.current),void 0!==t.key&&(l=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(u in t)_.call(t,u)&&!k.hasOwnProperty(u)&&(a[u]=void 0===t[u]&&void 0!==i?i[u]:t[u])}var u=arguments.length-2;if(1===u)a.children=r;else if(1<u){i=Array(u);for(var c=0;c<u;c++)i[c]=arguments[c+2];a.children=i}return{$$typeof:n,type:e.type,key:l,ref:o,props:a,_owner:s}},r.createContext=function(e){return(e={$$typeof:u,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:i,_context:e},e.Consumer=e},r.createElement=S,r.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},r.createRef=function(){return{current:null}},r.forwardRef=function(e){return{$$typeof:c,render:e}},r.isValidElement=C,r.lazy=function(e){return{$$typeof:p,_payload:{_status:-1,_result:e},_init:O}},r.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},r.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},r.unstable_act=I,r.useCallback=function(e,t){return T.current.useCallback(e,t)},r.useContext=function(e){return T.current.useContext(e)},r.useDebugValue=function(){},r.useDeferredValue=function(e){return T.current.useDeferredValue(e)},r.useEffect=function(e,t){return T.current.useEffect(e,t)},r.useId=function(){return T.current.useId()},r.useImperativeHandle=function(e,t,r){return T.current.useImperativeHandle(e,t,r)},r.useInsertionEffect=function(e,t){return T.current.useInsertionEffect(e,t)},r.useLayoutEffect=function(e,t){return T.current.useLayoutEffect(e,t)},r.useMemo=function(e,t){return T.current.useMemo(e,t)},r.useReducer=function(e,t,r){return T.current.useReducer(e,t,r)},r.useRef=function(e){return T.current.useRef(e)},r.useState=function(e){return T.current.useState(e)},r.useSyncExternalStore=function(e,t,r){return T.current.useSyncExternalStore(e,t,r)},r.useTransition=function(){return T.current.useTransition()},r.version="18.3.1"},91788,(e,t,r)=>{"use strict";t.exports=e.r(77325)},1884,(e,t,r)=>{"use strict";var n=e.r(91788),a=Symbol.for("react.element"),l=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,l={},u=null,c=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(c=t.ref),t)o.call(t,n)&&!i.hasOwnProperty(n)&&(l[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===l[n]&&(l[n]=t[n]);return{$$typeof:a,type:e,key:u,ref:c,props:l,_owner:s.current}}r.Fragment=l,r.jsx=u,r.jsxs=u},91398,(e,t,r)=>{"use strict";t.exports=e.r(1884)},41705,(e,t,r)=>{"use strict";r._=function(e){return e&&e.__esModule?e:{default:e}}},52456,(e,t,r)=>{"use strict";function n(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(n=function(e){return e?r:t})(e)}r._=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var r=n(t);if(r&&r.has(e))return r.get(e);var a={__proto__:null},l=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&Object.prototype.hasOwnProperty.call(e,o)){var s=l?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,r&&r.set(e,a),a}},89129,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={DecodeError:function(){return g},MiddlewareNotFoundError:function(){return w},MissingStaticPage:function(){return v},NormalizeError:function(){return x},PageNotFoundError:function(){return b},SP:function(){return y},ST:function(){return m},WEB_VITALS:function(){return l},execOnce:function(){return o},getDisplayName:function(){return d},getLocationOrigin:function(){return u},getURL:function(){return c},isAbsoluteUrl:function(){return i},isResSent:function(){return f},loadGetInitialProps:function(){return h},normalizeRepeatedSlashes:function(){return p},stringifyError:function(){return j}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let l=["CLS","FCP","FID","INP","LCP","TTFB"];function o(e){let t,r=!1;return(...n)=>(r||(r=!0,t=e(...n)),t)}let s=/^[a-zA-Z][a-zA-Z\d+\-.]*?:/,i=e=>s.test(e);function u(){let{protocol:e,hostname:t,port:r}=window.location;return`${e}//${t}${r?":"+r:""}`}function c(){let{href:e}=window.location,t=u();return e.substring(t.length)}function d(e){return"string"==typeof e?e:e.displayName||e.name||"Unknown"}function f(e){return e.finished||e.headersSent}function p(e){let t=e.split("?");return t[0].replace(/\\/g,"/").replace(/\/\/+/g,"/")+(t[1]?`?${t.slice(1).join("?")}`:"")}async function h(e,t){let r=t.res||t.ctx&&t.ctx.res;if(!e.getInitialProps)return t.ctx&&t.Component?{pageProps:await h(t.Component,t.ctx)}:{};let n=await e.getInitialProps(t);if(r&&f(r))return n;if(!n)throw Object.defineProperty(Error(`"${d(e)}.getInitialProps()" should resolve to an object. But found "${n}" instead.`),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return n}let y="undefined"!=typeof performance,m=y&&["mark","measure","getEntriesByName"].every(e=>"function"==typeof performance[e]);class g extends Error{}class x extends Error{}class b extends Error{constructor(e){super(),this.code="ENOENT",this.name="PageNotFoundError",this.message=`Cannot find module for page: ${e}`}}class v extends Error{constructor(e,t){super(),this.message=`Failed to load static file for page: ${e} ${t}`}}class w extends Error{constructor(){super(),this.code="ENOENT",this.message="Cannot find the middleware module"}}function j(e){return JSON.stringify({message:e.message,stack:e.stack})}},13584,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"HeadManagerContext",{enumerable:!0,get:function(){return n}});let n=e.r(41705)._(e.r(91788)).default.createContext({})},94470,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"warnOnce",{enumerable:!0,get:function(){return n}});let n=e=>{}},3828,(e,t,r)=>{t.exports=e.r(26990)},14549,e=>{"use strict";var t=e.i(91398),r=e.i(91788),n=e.i(21364),a=e.i(3828);function l({children:e}){let l=(0,a.useRouter)(),[o,s]=(0,r.useState)(!1);return((0,r.useEffect)(()=>{let e=!0;n.supabase.auth.getSession().then(t=>{t.data?.session?e&&s(!0):l.replace("/auth/login")});let{data:t}=n.supabase.auth.onAuthStateChange((e,t)=>{t||l.replace("/auth/login")});return()=>{t?.subscription?.unsubscribe(),e=!1}},[l]),o)?(0,t.jsx)(t.Fragment,{children:e}):(0,t.jsx)("div",{className:"card-neon text-center",children:(0,t.jsx)("p",{children:"Checking your session..."})})}e.s(["default",()=>l])},3490,e=>{"use strict";let t=(0,e.i(69547).default)("IdCard",[["path",{d:"M16 10h2",key:"8sgtl7"}],["path",{d:"M16 14h2",key:"epxaof"}],["path",{d:"M6.17 15a3 3 0 0 1 5.66 0",key:"n6f512"}],["circle",{cx:"9",cy:"11",r:"2",key:"yxgjnd"}],["rect",{x:"2",y:"5",width:"20",height:"14",rx:"2",key:"qneu4z"}]]);e.s(["IdCard",()=>t],3490)},31548,e=>{"use strict";var t=e.i(91398),r=e.i(91788),n=e.i(14549),a=e.i(21364),l=e.i(69547);let o=(0,l.default)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);var s=e.i(3490);let i=(0,l.default)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]),u=(0,l.default)("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);function c(){let[e,l]=(0,r.useState)(null),[c,d]=(0,r.useState)(1),[f,p]=(0,r.useState)(""),[h,y]=(0,r.useState)(""),[m,g]=(0,r.useState)(""),[x,b]=(0,r.useState)("national_id"),[v,w]=(0,r.useState)(""),[j,_]=(0,r.useState)("NG"),[N,k]=(0,r.useState)(""),[S,C]=(0,r.useState)(null),[E,P]=(0,r.useState)(null),[$,O]=(0,r.useState)(null),[T,R]=(0,r.useState)(null),[I,D]=(0,r.useState)(null),[L,A]=(0,r.useState)(1),[M,U]=(0,r.useState)(!1),[F,B]=(0,r.useState)(null),[z,V]=(0,r.useState)(null),[W,q]=(0,r.useState)(!1),[G,Z]=(0,r.useState)(""),H={NG:{name:"Nigeria",idTypes:[{value:"national_id",label:"National ID (NIN)",pattern:/^[0-9]{11}$/},{value:"passport",label:"Passport",pattern:/^[A-Z0-9]{8,9}$/},{value:"driver_license",label:"Driver License",pattern:/^[A-Z0-9\-]{10,}$/},{value:"voter_card",label:"Voter Card",pattern:/^[A-Z0-9]{10,}$/}]},US:{name:"United States",idTypes:[{value:"passport",label:"Passport",pattern:/^[A-Z0-9]{9}$/},{value:"driver_license",label:"Driver License",pattern:/^[A-Z0-9\-]{5,}$/},{value:"national_id",label:"SSN (last 4)",pattern:/^[0-9]{4}$/}]},GB:{name:"United Kingdom",idTypes:[{value:"passport",label:"Passport",pattern:/^[0-9]{9}$/},{value:"driver_license",label:"Driver License",pattern:/^[A-Z0-9]{16}$/}]}};async function K(){try{let{data:e}=await a.supabase.auth.getUser(),t=e.user?.id;if(!t)return;let{data:r}=await a.supabase.from("profiles").select("user_id,email,kyc_status,kyc_level,kyc_submitted_at").eq("user_id",t).maybeSingle();l(r||null),"number"==typeof r?.kyc_level&&d(Number(r.kyc_level))}catch{}}function Y(e){if(!z)return null;let t=document.createElement("canvas");return t.width=z.videoWidth||640,t.height=z.videoHeight||480,t.getContext("2d").drawImage(z,0,0,t.width,t.height),new Promise(r=>{t.toBlob(t=>{r(t?new File([t],e,{type:"image/jpeg"}):null)},"image/jpeg",.9)})}function J(e){return new Promise((t,r)=>{let n=new Image;n.onload=()=>{let e=document.createElement("canvas");e.width=n.naturalWidth,e.height=n.naturalHeight;let r=e.getContext("2d");r.drawImage(n,0,0),t(r.getImageData(0,0,e.width,e.height))},n.onerror=e=>r(e),n.src=URL.createObjectURL(e)})}function X(e,t){let r=Math.min(e.width,t.width),n=Math.min(e.height,t.height),a=0;for(let l=0;l<n;l++)for(let n=0;n<r;n++){let o=(l*r+n)*4;(Math.abs(e.data[o]-t.data[o])+Math.abs(e.data[o+1]-t.data[o+1])+Math.abs(e.data[o+2]-t.data[o+2]))/3>25&&a++}return Math.round(a/(r*n)*1e3)/10}async function Q(){q(!0),Z("");try{let{data:e}=await a.supabase.auth.getSession(),t=e.session?.access_token;if(!t)throw Error("Session expired");let{data:r}=await a.supabase.auth.getUser();if(!r.user?.id)throw Error("Not authenticated");let n=H[j]?.idTypes.find(e=>e.value===x),l=n?.pattern;if(!f||!h||!m||!x||!v||!S)throw Error("Fill all fields and attach files");if(l&&!l.test(v))throw Error("ID number format invalid for selected country/type");if(!E||!$||!T||!I)throw Error("Capture all selfie steps (neutral, smile, left, right)");if(S.size>6e6)throw Error("ID file too large");if(!["image/jpeg","image/png","application/pdf"].includes(S.type))throw Error("Invalid ID file type");for(let e of[E,$,T,I]){if(e.size>6e6)throw Error("Selfie too large");if(!["image/jpeg","image/png"].includes(e.type))throw Error("Invalid selfie file type")}let o=await J(E),s=await J($),i=await J(T),u=await J(I),d={diff_smile_vs_neutral:X(o,s),diff_left_vs_neutral:X(o,i),diff_right_vs_neutral:X(o,u)},_=e=>new Promise((t,r)=>{let n=new FileReader;n.onload=()=>t(String(n.result||"")),n.onerror=e=>r(e),n.readAsDataURL(e)}),k={idFileDataUrl:await _(S),selfieNeutralDataUrl:await _(E),selfieSmileDataUrl:await _($),selfieLeftDataUrl:await _(T),selfieRightDataUrl:await _(I),payload:{fullName:f,dob:h,address:m,country:j,idType:x,idNumber:v,idExpiry:N,level:c,livenessMetrics:d}},L=await fetch("/api/kyc/upload",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(k)}),M=await L.json();if(!L.ok)throw Error(M.error||"Upload failed");let F=await fetch("/api/kyc/submit",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({level:c})}),B=await F.json();if(!F.ok)throw Error(B.error||"Submit failed");Z("KYC submitted for review"),p(""),y(""),g(""),b("national_id"),w(""),C(null),P(null),O(null),R(null),D(null),A(1),U(!1),K()}catch(e){Z(e.message)}finally{q(!1)}}(0,r.useEffect)(()=>{K()},[]),(0,r.useEffect)(()=>{if(!M)return;let e=document.querySelector("#kyc-selfie-video");return V(e),navigator.mediaDevices.getUserMedia({video:{facingMode:"user"},audio:!1}).then(t=>{B(t),e&&(e.srcObject=t,e.play())}).catch(()=>{U(!1)}),()=>{try{F?.getTracks()?.forEach(e=>e.stop())}catch{}}},[M]);let ee=String(e?.kyc_status||"pending").toLowerCase(),et=e?.kyc_submitted_at?new Date(e.kyc_submitted_at).toLocaleString():null;return(0,t.jsx)(n.default,{children:(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-gray-100 py-10 px-4",children:(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,t.jsx)("div",{className:"h-10 w-10 rounded-full bg-blue-600 text-white flex items-center justify-center",children:(0,t.jsx)(s.IdCard,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"KYC Verification"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Securely verify your identity to unlock withdrawals and advanced features."})]})]}),G&&(0,t.jsx)("p",{className:`mb-3 text-sm ${"approved"===ee?"text-green-700":"text-blue-700"}`,children:G}),(0,t.jsxs)("div",{className:"rounded-2xl shadow-xl border border-gray-100 p-6 space-y-4 bg-white text-gray-900",children:[(0,t.jsxs)("p",{className:"text-sm",children:["Status: ",(0,t.jsx)("span",{className:`px-2 py-1 rounded text-xs ${"approved"===ee?"bg-green-100 text-green-800":"rejected"===ee?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:ee})]}),et&&(0,t.jsxs)("p",{className:"text-sm",children:["Submitted: ",et]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:`h-8 w-8 rounded-full flex items-center justify-center ${L>=1?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:(0,t.jsx)(o,{className:"h-4 w-4"})}),(0,t.jsx)("div",{className:`h-1 w-10 rounded ${L>=2?"bg-blue-600":"bg-gray-200"}`}),(0,t.jsx)("div",{className:`h-8 w-8 rounded-full flex items-center justify-center ${L>=2?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:(0,t.jsx)(s.IdCard,{className:"h-4 w-4"})}),(0,t.jsx)("div",{className:`h-1 w-10 rounded ${L>=3?"bg-blue-600":"bg-gray-200"}`}),(0,t.jsx)("div",{className:`h-8 w-8 rounded-full flex items-center justify-center ${L>=3?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:(0,t.jsx)(i,{className:"h-4 w-4"})}),(0,t.jsx)("div",{className:`h-1 w-10 rounded ${L>=4?"bg-blue-600":"bg-gray-200"}`}),(0,t.jsx)("div",{className:`h-8 w-8 rounded-full flex items-center justify-center ${L>=4?"bg-blue-600 text-white":"bg-gray-200 text-gray-600"}`,children:(0,t.jsx)(u,{className:"h-4 w-4"})})]}),(0,t.jsxs)("div",{className:"text-xs text-gray-500",children:["Step ",L," of 4"]})]}),1===L&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Full Name"}),(0,t.jsx)("input",{value:f,onChange:e=>p(e.target.value),className:"border rounded px-3 py-2 w-full text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"John Doe"}),(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Date of Birth"}),(0,t.jsx)("input",{value:h,onChange:e=>y(e.target.value),className:"border rounded px-3 py-2 w-full text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",type:"date"}),(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Address"}),(0,t.jsx)("input",{value:m,onChange:e=>g(e.target.value),className:"border rounded px-3 py-2 w-full text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Street, City, Country"}),(0,t.jsx)("label",{className:"block text-sm font-medium",children:"KYC Level"}),(0,t.jsx)("select",{value:c,onChange:e=>d(Number(e.target.value)),className:"border rounded px-3 py-2 text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[1,2,3].map(e=>(0,t.jsxs)("option",{value:e,children:["Level ",e]},e))}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)("button",{onClick:()=>A(2),className:"bg-blue-600 hover:bg-blue-700 transition text-white rounded-lg px-4 py-2",children:"Next"})})]}),2===L&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("label",{className:"block text-sm font-medium",children:"Government ID Type"}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-2",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-900",children:"Country"}),(0,t.jsx)("select",{value:j,onChange:e=>{_(e.target.value);let t=H[e.target.value]?.idTypes[0]?.value;t&&b(t)},className:"border rounded px-3 py-2 w-full text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",children:Object.keys(H).map(e=>(0,t.jsx)("option",{value:e,children:H[e].name},e))})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-xs text-gray-900",children:"ID Type"}),(0,t.jsx)("select",{value:x,onChange:e=>b(e.target.value),className:"border rounded px-3 py-2 w-full text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",children:(H[j]?.idTypes||[]).map(e=>(0,t.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Government ID Number"}),(0,t.jsx)("input",{value:v,onChange:e=>w(e.target.value),className:"border rounded px-3 py-2 w-full text-gray-900 placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"ID Number"}),(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"ID Expiry Date"}),(0,t.jsx)("input",{value:N,onChange:e=>k(e.target.value),className:"border rounded px-3 py-2 w-full text-gray-900 focus:outline-none focus:ring-2 focus:ring-blue-500",type:"date"}),(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Upload Government ID"}),(0,t.jsxs)("div",{className:"border-2 border-dashed rounded-lg p-4 text-center",children:[(0,t.jsx)("input",{onChange:e=>C(e.target.files?.[0]||null),className:"w-full text-gray-900",type:"file",accept:"image/*,application/pdf"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Accepted: JPG, PNG, PDF up to 10MB"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>A(1),className:"border text-blue-600 rounded-lg px-4 py-2",children:"Back"}),(0,t.jsx)("button",{onClick:()=>A(3),className:"bg-blue-600 hover:bg-blue-700 transition text-white rounded-lg px-4 py-2",children:"Next"})]})]}),3===L&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-900",children:"Selfie Liveness"}),!M&&(0,t.jsx)("button",{onClick:()=>U(!0),className:"bg-blue-600 text-white rounded px-4 py-2",children:"Start Camera"}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("video",{id:"kyc-selfie-video",className:"w-full rounded-lg border border-gray-200 shadow-sm"}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:async()=>{let e=await Y("selfie_neutral.jpg");e&&P(e)},className:"border rounded-lg px-4 py-2",children:"Capture Neutral"}),(0,t.jsx)("button",{onClick:async()=>{let e=await Y("selfie_smile.jpg");e&&O(e)},className:"border rounded-lg px-4 py-2",children:"Capture Smile"}),(0,t.jsx)("button",{onClick:async()=>{let e=await Y("selfie_left.jpg");e&&R(e)},className:"border rounded-lg px-4 py-2",children:"Capture Left"}),(0,t.jsx)("button",{onClick:async()=>{let e=await Y("selfie_right.jpg");e&&D(e)},className:"border rounded-lg px-4 py-2",children:"Capture Right"}),(0,t.jsx)("input",{onChange:e=>P(e.target.files?.[0]||null),className:"border rounded px-3 py-2 text-gray-900",type:"file",accept:"image/*"}),(0,t.jsx)("input",{onChange:e=>O(e.target.files?.[0]||null),className:"border rounded px-3 py-2 text-gray-900",type:"file",accept:"image/*"}),(0,t.jsx)("input",{onChange:e=>R(e.target.files?.[0]||null),className:"border rounded px-3 py-2 text-gray-900",type:"file",accept:"image/*"}),(0,t.jsx)("input",{onChange:e=>D(e.target.files?.[0]||null),className:"border rounded px-3 py-2 text-gray-900",type:"file",accept:"image/*"})]})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>A(2),className:"border text-blue-600 rounded-lg px-4 py-2",children:"Back"}),(0,t.jsx)("button",{onClick:()=>A(4),className:"bg-blue-600 hover:bg-blue-700 transition text-white rounded-lg px-4 py-2",children:"Next"})]})]}),4===L&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"text-sm",children:"Review and submit."}),(0,t.jsx)("button",{disabled:W||"approved"===ee,onClick:Q,className:"bg-blue-600 hover:bg-blue-700 transition text-white rounded-lg px-4 py-2 disabled:opacity-50",children:W?"Submittingâ€¦":"approved"===ee?"Already Approved":"Submit KYC"}),(0,t.jsx)("button",{onClick:()=>A(3),className:"border text-blue-600 rounded-lg px-4 py-2 ml-2",children:"Back"})]})]})]})})})}e.s(["default",()=>c],31548)},68466,(e,t,r)=>{let n="/kyc";(window.__NEXT_P=window.__NEXT_P||[]).push([n,()=>e.r(31548)]),t.hot&&t.hot.dispose(function(){window.__NEXT_P.push([n])})},48761,e=>{e.v(t=>Promise.all(["static/chunks/d7e64d1f72e203d3.js"].map(t=>e.l(t))).then(()=>t(93594)))},28805,e=>{e.v(t=>Promise.all(["static/chunks/3dcc93bb4829c1ba.js"].map(t=>e.l(t))).then(()=>t(79466)))}]);