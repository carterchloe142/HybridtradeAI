{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Documents/trae_projects/HYBRID%20TRADE%20AI/src/lib/redis.ts"],"sourcesContent":["import Redis from 'ioredis'\n\nexport function createRedis(url = process.env.REDIS_URL || 'redis://localhost:6379') {\n  const tlsOpts = url.startsWith('rediss://') ? { tls: { rejectUnauthorized: false } } : {}\n  const client = new Redis(url, tlsOpts as any)\n  client.on('error', () => {})\n  client.on('connect', () => {})\n  client.on('ready', () => {})\n  client.on('end', () => {})\n  return client\n}\n\nexport const redis = createRedis()\n\nexport function duplicate(client: Redis) {\n  const dup = client.duplicate()\n  dup.on('error', () => {})\n  dup.on('connect', () => {})\n  dup.on('ready', () => {})\n  dup.on('end', () => {})\n  return dup\n}\n\nexport const pub = duplicate(redis)\nexport const sub = duplicate(redis)\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAEO,SAAS,YAAY,MAAM,QAAQ,GAAG,CAAC,SAAS,IAAI,wBAAwB;IACjF,MAAM,UAAU,IAAI,UAAU,CAAC,eAAe;QAAE,KAAK;YAAE,oBAAoB;QAAM;IAAE,IAAI,CAAC;IACxF,MAAM,SAAS,IAAI,kHAAK,CAAC,KAAK;IAC9B,OAAO,EAAE,CAAC,SAAS,KAAO;IAC1B,OAAO,EAAE,CAAC,WAAW,KAAO;IAC5B,OAAO,EAAE,CAAC,SAAS,KAAO;IAC1B,OAAO,EAAE,CAAC,OAAO,KAAO;IACxB,OAAO;AACT;AAEO,MAAM,QAAQ;AAEd,SAAS,UAAU,MAAa;IACrC,MAAM,MAAM,OAAO,SAAS;IAC5B,IAAI,EAAE,CAAC,SAAS,KAAO;IACvB,IAAI,EAAE,CAAC,WAAW,KAAO;IACzB,IAAI,EAAE,CAAC,SAAS,KAAO;IACvB,IAAI,EAAE,CAAC,OAAO,KAAO;IACrB,OAAO;AACT;AAEO,MAAM,MAAM,UAAU;AACtB,MAAM,MAAM,UAAU","debugId":null}},
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Documents/trae_projects/HYBRID%20TRADE%20AI/src/lib/sse.ts"],"sourcesContent":["import type Redis from 'ioredis'\nimport { pub, sub } from './redis'\n\nexport async function publish(channel: string, payload: unknown) {\n  const data = JSON.stringify(payload)\n  await pub.publish(channel, data)\n}\n\nexport function subscribe(channel: string, handler: (payload: any) => void, client: Redis = sub) {\n  client.subscribe(channel)\n  const onMessage = (ch: string, message: string) => {\n    if (ch !== channel) return\n    try {\n      handler(JSON.parse(message))\n    } catch {\n      handler(message)\n    }\n  }\n  client.on('message', onMessage)\n  return () => {\n    client.off('message', onMessage)\n    client.unsubscribe(channel)\n  }\n}\n"],"names":[],"mappings":";;;;;;AACA;;AAEO,eAAe,QAAQ,OAAe,EAAE,OAAgB;IAC7D,MAAM,OAAO,KAAK,SAAS,CAAC;IAC5B,MAAM,mHAAG,CAAC,OAAO,CAAC,SAAS;AAC7B;AAEO,SAAS,UAAU,OAAe,EAAE,OAA+B,EAAE,SAAgB,mHAAG;IAC7F,OAAO,SAAS,CAAC;IACjB,MAAM,YAAY,CAAC,IAAY;QAC7B,IAAI,OAAO,SAAS;QACpB,IAAI;YACF,QAAQ,KAAK,KAAK,CAAC;QACrB,EAAE,OAAM;YACN,QAAQ;QACV;IACF;IACA,OAAO,EAAE,CAAC,WAAW;IACrB,OAAO;QACL,OAAO,GAAG,CAAC,WAAW;QACtB,OAAO,WAAW,CAAC;IACrB;AACF","debugId":null}}]
}