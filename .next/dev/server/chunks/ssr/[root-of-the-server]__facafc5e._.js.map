{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 20, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Documents/trae_projects/HYBRID%20TRADE%20AI/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || process.env.SUPABASE_URL;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || process.env.SUPABASE_ANON_KEY;\n\nfunction makeStub() {\n  const noop = async () => ({ data: null, error: new Error('Supabase not configured') });\n  const auth = {\n    getSession: async () => ({ data: { session: null } }),\n    onAuthStateChange: () => ({ data: { subscription: { unsubscribe: () => {} } } }),\n    signUp: async () => ({ data: null, error: new Error('Supabase not configured') }),\n    signInWithPassword: async () => ({ data: null, error: new Error('Supabase not configured') })\n  };\n  const query = {\n    select: () => ({ eq: () => ({ limit: () => ({ maybeSingle: noop }) }), maybeSingle: noop }),\n    upsert: () => ({ select: noop }),\n    eq: () => ({ select: noop }),\n  } as any;\n  return { auth, from: () => query } as any;\n}\n\nexport const supabase = (supabaseUrl && supabaseAnonKey)\n  ? createClient(supabaseUrl, supabaseAnonKey, { auth: { persistSession: true, autoRefreshToken: true } })\n  : makeStub();\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,gFAAwC,QAAQ,GAAG,CAAC,YAAY;AACpF,MAAM,kBAAkB,wPAA6C,QAAQ,GAAG,CAAC,iBAAiB;AAElG,SAAS;IACP,MAAM,OAAO,UAAY,CAAC;YAAE,MAAM;YAAM,OAAO,IAAI,MAAM;QAA2B,CAAC;IACrF,MAAM,OAAO;QACX,YAAY,UAAY,CAAC;gBAAE,MAAM;oBAAE,SAAS;gBAAK;YAAE,CAAC;QACpD,mBAAmB,IAAM,CAAC;gBAAE,MAAM;oBAAE,cAAc;wBAAE,aAAa,KAAO;oBAAE;gBAAE;YAAE,CAAC;QAC/E,QAAQ,UAAY,CAAC;gBAAE,MAAM;gBAAM,OAAO,IAAI,MAAM;YAA2B,CAAC;QAChF,oBAAoB,UAAY,CAAC;gBAAE,MAAM;gBAAM,OAAO,IAAI,MAAM;YAA2B,CAAC;IAC9F;IACA,MAAM,QAAQ;QACZ,QAAQ,IAAM,CAAC;gBAAE,IAAI,IAAM,CAAC;wBAAE,OAAO,IAAM,CAAC;gCAAE,aAAa;4BAAK,CAAC;oBAAE,CAAC;gBAAG,aAAa;YAAK,CAAC;QAC1F,QAAQ,IAAM,CAAC;gBAAE,QAAQ;YAAK,CAAC;QAC/B,IAAI,IAAM,CAAC;gBAAE,QAAQ;YAAK,CAAC;IAC7B;IACA,OAAO;QAAE;QAAM,MAAM,IAAM;IAAM;AACnC;AAEO,MAAM,WAAW,uCACpB,IAAA,iKAAY,EAAC,aAAa,iBAAiB;IAAE,MAAM;QAAE,gBAAgB;QAAM,kBAAkB;IAAK;AAAE,KACpG","debugId":null}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Documents/trae_projects/HYBRID%20TRADE%20AI/pages/auth/login.tsx"],"sourcesContent":["import { useState } from 'react';\nimport { z } from 'zod';\nimport { supabase } from '../../lib/supabase';\nimport Link from 'next/link';\nimport { useRouter } from 'next/router';\n\nconst schema = z.object({\n  email: z.string().email(),\n  password: z.string().min(6),\n});\n\nexport default function Login() {\n  const [form, setForm] = useState({ email: '', password: '' });\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const router = useRouter();\n\n  const onSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setError(null);\n    const parsed = schema.safeParse(form);\n    if (!parsed.success) {\n      setError(parsed.error.issues[0]?.message || 'Invalid form');\n      return;\n    }\n    try {\n      setLoading(true);\n      const { data, error } = await supabase.auth.signInWithPassword({ email: form.email, password: form.password });\n      if (error) throw error;\n      // Redirect admins to /admin, others to /dashboard\n      const userId = data.user?.id;\n      if (userId) {\n        const { data: profile } = await supabase\n          .from('profiles')\n          .select('role,is_admin')\n          .eq('user_id', userId)\n          .maybeSingle();\n        const role = String(profile?.role || '').toLowerCase();\n        const isAdmin = Boolean(profile?.is_admin) || role === 'admin';\n        router.push(isAdmin ? '/admin' : '/dashboard');\n      } else {\n        router.push('/dashboard');\n      }\n    } catch (err: any) {\n      setError(err.message || 'Login failed');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"max-w-md mx-auto card-neon\">\n      <h2 className=\"text-2xl font-bold neon-text\">Welcome back</h2>\n      <form onSubmit={onSubmit} className=\"mt-6 space-y-4\">\n        <div>\n          <label className=\"text-sm text-white/70\">Email</label>\n          <input className=\"input-neon mt-1\" type=\"email\" value={form.email} onChange={(e) => setForm({ ...form, email: e.target.value })} />\n        </div>\n        <div>\n          <label className=\"text-sm text-white/70\">Password</label>\n          <input className=\"input-neon mt-1\" type=\"password\" value={form.password} onChange={(e) => setForm({ ...form, password: e.target.value })} />\n        </div>\n        {error && <div className=\"text-red-400 text-sm\">{error}</div>}\n        <button className=\"btn-neon w-full\" disabled={loading}>\n          {loading ? 'Logging in...' : 'Login'}\n        </button>\n      </form>\n      <p className=\"mt-4 text-sm text-white/70\">New here? <Link className=\"text-neon-blue\" href=\"/auth/register\">Create an account</Link></p>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;AAEA,MAAM,SAAS,2GAAC,CAAC,MAAM,CAAC;IACtB,OAAO,2GAAC,CAAC,MAAM,GAAG,KAAK;IACvB,UAAU,2GAAC,CAAC,MAAM,GAAG,GAAG,CAAC;AAC3B;AAEe,SAAS;IACtB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+GAAQ,EAAC;QAAE,OAAO;QAAI,UAAU;IAAG;IAC3D,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,+GAAQ,EAAgB;IAClD,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,+GAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,oIAAS;IAExB,MAAM,WAAW,OAAO;QACtB,EAAE,cAAc;QAChB,SAAS;QACT,MAAM,SAAS,OAAO,SAAS,CAAC;QAChC,IAAI,CAAC,OAAO,OAAO,EAAE;YACnB,SAAS,OAAO,KAAK,CAAC,MAAM,CAAC,EAAE,EAAE,WAAW;YAC5C;QACF;QACA,IAAI;YACF,WAAW;YACX,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oHAAQ,CAAC,IAAI,CAAC,kBAAkB,CAAC;gBAAE,OAAO,KAAK,KAAK;gBAAE,UAAU,KAAK,QAAQ;YAAC;YAC5G,IAAI,OAAO,MAAM;YACjB,kDAAkD;YAClD,MAAM,SAAS,KAAK,IAAI,EAAE;YAC1B,IAAI,QAAQ;gBACV,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,oHAAQ,CACrC,IAAI,CAAC,YACL,MAAM,CAAC,iBACP,EAAE,CAAC,WAAW,QACd,WAAW;gBACd,MAAM,OAAO,OAAO,SAAS,QAAQ,IAAI,WAAW;gBACpD,MAAM,UAAU,QAAQ,SAAS,aAAa,SAAS;gBACvD,OAAO,IAAI,CAAC,UAAU,WAAW;YACnC,OAAO;gBACL,OAAO,IAAI,CAAC;YACd;QACF,EAAE,OAAO,KAAU;YACjB,SAAS,IAAI,OAAO,IAAI;QAC1B,SAAU;YACR,WAAW;QACb;IACF;IAEA,qBACE,qKAAC;QAAI,WAAU;;0BACb,qKAAC;gBAAG,WAAU;0BAA+B;;;;;;0BAC7C,qKAAC;gBAAK,UAAU;gBAAU,WAAU;;kCAClC,qKAAC;;0CACC,qKAAC;gCAAM,WAAU;0CAAwB;;;;;;0CACzC,qKAAC;gCAAM,WAAU;gCAAkB,MAAK;gCAAQ,OAAO,KAAK,KAAK;gCAAE,UAAU,CAAC,IAAM,QAAQ;wCAAE,GAAG,IAAI;wCAAE,OAAO,EAAE,MAAM,CAAC,KAAK;oCAAC;;;;;;;;;;;;kCAE/H,qKAAC;;0CACC,qKAAC;gCAAM,WAAU;0CAAwB;;;;;;0CACzC,qKAAC;gCAAM,WAAU;gCAAkB,MAAK;gCAAW,OAAO,KAAK,QAAQ;gCAAE,UAAU,CAAC,IAAM,QAAQ;wCAAE,GAAG,IAAI;wCAAE,UAAU,EAAE,MAAM,CAAC,KAAK;oCAAC;;;;;;;;;;;;oBAEvI,uBAAS,qKAAC;wBAAI,WAAU;kCAAwB;;;;;;kCACjD,qKAAC;wBAAO,WAAU;wBAAkB,UAAU;kCAC3C,UAAU,kBAAkB;;;;;;;;;;;;0BAGjC,qKAAC;gBAAE,WAAU;;oBAA6B;kCAAU,qKAAC,gIAAI;wBAAC,WAAU;wBAAiB,MAAK;kCAAiB;;;;;;;;;;;;;;;;;;AAGjH","debugId":null}}]
}