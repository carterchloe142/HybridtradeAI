{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Documents/trae_projects/HYBRID%20TRADE%20AI/components/PlanCard.tsx"],"sourcesContent":["import React from 'react';\nimport { motion } from 'framer-motion';\nimport { Plan } from '../types';\n\ntype Props = {\n  plan: Plan;\n  onInvest?: (planId: string) => void;\n};\n\nexport default function PlanCard({ plan, onInvest }: Props) {\n  return (\n    <motion.div\n      className=\"card-neon flex flex-col\"\n      initial={{ opacity: 0, y: 12 }}\n      animate={{ opacity: 1, y: 0 }}\n      whileHover={{ scale: 1.02 }}\n      transition={{ duration: 0.4, ease: 'easeOut' }}\n    >\n      <div className=\"flex items-center justify-between\">\n        <h3 className=\"text-xl font-bold neon-text\">{plan.name}</h3>\n        <span className=\"text-neon-blue font-semibold\">{plan.weeklyRoi}% weekly</span>\n      </div>\n      <p className=\"mt-2 text-sm text-white/70\">{plan.description}</p>\n\n      <ul className=\"mt-4 space-y-1 text-sm text-white/80 list-disc list-inside\">\n        {plan.features.map((f) => (\n          <li key={f}>{f}</li>\n        ))}\n      </ul>\n\n      <button\n        className=\"btn-neon mt-6\"\n        onClick={() => onInvest?.(plan.id)}\n      >\n        Invest in {plan.name}\n      </button>\n    </motion.div>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;;;;;;;AAQe,SAAS,SAAS,EAAE,IAAI,EAAE,QAAQ,EAAS;IACxD,qBACE,qKAAC,0IAAM,CAAC,GAAG;QACT,WAAU;QACV,SAAS;YAAE,SAAS;YAAG,GAAG;QAAG;QAC7B,SAAS;YAAE,SAAS;YAAG,GAAG;QAAE;QAC5B,YAAY;YAAE,OAAO;QAAK;QAC1B,YAAY;YAAE,UAAU;YAAK,MAAM;QAAU;;0BAE7C,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAG,WAAU;kCAA+B,KAAK,IAAI;;;;;;kCACtD,qKAAC;wBAAK,WAAU;;4BAAgC,KAAK,SAAS;4BAAC;;;;;;;;;;;;;0BAEjE,qKAAC;gBAAE,WAAU;0BAA8B,KAAK,WAAW;;;;;;0BAE3D,qKAAC;gBAAG,WAAU;0BACX,KAAK,QAAQ,CAAC,GAAG,CAAC,CAAC,kBAClB,qKAAC;kCAAY;uBAAJ;;;;;;;;;;0BAIb,qKAAC;gBACC,WAAU;gBACV,SAAS,IAAM,WAAW,KAAK,EAAE;;oBAClC;oBACY,KAAK,IAAI;;;;;;;;;;;;;AAI5B","debugId":null}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Documents/trae_projects/HYBRID%20TRADE%20AI/backend/profit-engine.ts"],"sourcesContent":["import type { Balance, Plan } from '../types';\n\nexport const PLANS: Plan[] = [\n  {\n    id: 'starter',\n    name: 'Starter',\n    description: 'Entry plan allocating 70% Ads & Tasks and 30% Trading.',\n    weeklyRoi: 30, // mid of 21–40% range; actual ROI comes from admin streams\n    features: ['70% Ads & Tasks', '30% Trading', 'Task bonuses available']\n  },\n  {\n    id: 'pro',\n    name: 'Pro',\n    description: 'Balanced plan: 60% Trading, 25% Copy-Trading, 15% Ads & Tasks.',\n    weeklyRoi: 35, // mid of 25–45% range\n    features: ['60% Trading', '25% Copy-Trading', '15% Ads & Tasks', 'Premium education content']\n  },\n  {\n    id: 'elite',\n    name: 'Elite',\n    description: 'High-tier: 50% Trading, 30% Staking/Yield, 20% AI/Copy-Trading.',\n    weeklyRoi: 40, // mid of 30–50% range\n    features: ['Priority withdrawals', 'Beta access to new features', '50% Trading', '30% Staking/Yield', '20% AI/Copy-Trading']\n  }\n];\n\nexport type ReferralConfig = {\n  starter: number;\n  pro: number;\n  elite: number;\n};\n\nexport const referralConfig: ReferralConfig = { starter: 5, pro: 7, elite: 10 };\n\nexport function calculateWeeklyROI(amountUSD: number, planId: string): number {\n  const plan = PLANS.find(p => p.id === planId);\n  if (!plan) return 0;\n  const roi = amountUSD * (plan.weeklyRoi / 100);\n  return Number(roi.toFixed(2));\n}\n\nexport function calculateReferralCommission(downlineWeeklyRoiUSD: number, planId: string): number {\n  const pct = planId === 'pro' ? referralConfig.pro : planId === 'elite' ? referralConfig.elite : referralConfig.starter;\n  const commission = downlineWeeklyRoiUSD * (pct / 100);\n  return Number(commission.toFixed(2));\n}\n\n// Placeholder for cron / scheduled profit distribution\nexport async function distributeWeeklyProfits() {\n  // TODO: integrate with DB (Supabase) to: \n  // 1) fetch active investments\n  // 2) compute ROI per plan\n  // 3) credit wallets for profits and referrals\n  // 4) record transactions and update balances\n  return { ok: true, message: 'Scheduled distribution stub executed.' };\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAEO,MAAM,QAAgB;IAC3B;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,WAAW;QACX,UAAU;YAAC;YAAmB;YAAe;SAAyB;IACxE;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,WAAW;QACX,UAAU;YAAC;YAAe;YAAoB;YAAmB;SAA4B;IAC/F;IACA;QACE,IAAI;QACJ,MAAM;QACN,aAAa;QACb,WAAW;QACX,UAAU;YAAC;YAAwB;YAA+B;YAAe;YAAqB;SAAsB;IAC9H;CACD;AAQM,MAAM,iBAAiC;IAAE,SAAS;IAAG,KAAK;IAAG,OAAO;AAAG;AAEvE,SAAS,mBAAmB,SAAiB,EAAE,MAAc;IAClE,MAAM,OAAO,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;IACtC,IAAI,CAAC,MAAM,OAAO;IAClB,MAAM,MAAM,YAAY,CAAC,KAAK,SAAS,GAAG,GAAG;IAC7C,OAAO,OAAO,IAAI,OAAO,CAAC;AAC5B;AAEO,SAAS,4BAA4B,oBAA4B,EAAE,MAAc;IACtF,MAAM,MAAM,WAAW,QAAQ,eAAe,GAAG,GAAG,WAAW,UAAU,eAAe,KAAK,GAAG,eAAe,OAAO;IACtH,MAAM,aAAa,uBAAuB,CAAC,MAAM,GAAG;IACpD,OAAO,OAAO,WAAW,OAAO,CAAC;AACnC;AAGO,eAAe;IACpB,0CAA0C;IAC1C,8BAA8B;IAC9B,0BAA0B;IAC1B,8CAA8C;IAC9C,6CAA6C;IAC7C,OAAO;QAAE,IAAI;QAAM,SAAS;IAAwC;AACtE","debugId":null}},
    {"offset": {"line": 202, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Documents/trae_projects/HYBRID%20TRADE%20AI/lib/db.ts"],"sourcesContent":["import { supabase } from './supabase';\n\nexport type WalletRow = {\n  id: string;\n  user_id: string;\n  currency: 'USD' | 'EUR' | 'NGN' | 'BTC' | 'ETH';\n  balance: number;\n};\n\nexport type InvestmentRow = {\n  id: string;\n  user_id: string;\n  plan_id: 'starter' | 'pro' | 'elite';\n  amount_usd: number;\n  status: 'active' | 'completed' | 'pending';\n};\n\nexport async function getCurrentUserId(): Promise<string | null> {\n  const { data } = await supabase.auth.getSession();\n  return data.session?.user?.id ?? null;\n}\n\nexport async function getUserWallets(userId: string): Promise<WalletRow[]> {\n  // First try client-side read (requires RLS policies). If empty or blocked, fallback to server API.\n  const { data, error } = await supabase\n    .from('wallets')\n    .select('id,user_id,currency,balance')\n    .eq('user_id', userId);\n  const direct = (data ?? []) as WalletRow[];\n  if (!error && direct.length > 0) return direct;\n  try {\n    const { data: session } = await supabase.auth.getSession();\n    const token = session.session?.access_token;\n    if (!token) return direct; // cannot fallback without token\n    const res = await fetch(`/api/user/wallets?ts=${Date.now()}`, {\n      headers: { Authorization: `Bearer ${token}` },\n      // Ensure no caching by intermediaries\n      cache: 'no-store',\n    });\n    if (!res.ok) return direct;\n    const payload = await res.json();\n    return (payload.wallets ?? []) as WalletRow[];\n  } catch {\n    return direct;\n  }\n}\n\nexport async function getUserInvestments(userId: string): Promise<InvestmentRow[]> {\n  const { data, error } = await supabase\n    .from('investments')\n    .select('id,user_id,plan_id,amount_usd,status')\n    .eq('user_id', userId);\n  if (error) return [];\n  return (data ?? []) as InvestmentRow[];\n}\n\nexport async function upsertReferral(userId: string, code: string) {\n  const { data, error } = await supabase\n    .from('referrals')\n    .upsert({ user_id: userId, code }, { onConflict: 'user_id' })\n    .select();\n  if (error) return null;\n  return data?.[0] ?? null;\n}\n\nexport async function getReferralByUser(userId: string) {\n  const { data } = await supabase\n    .from('referrals')\n    .select('code,total_earnings')\n    .eq('user_id', userId)\n    .limit(1)\n    .maybeSingle();\n  return data ?? null;\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAAA;;AAiBO,eAAe;IACpB,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,oHAAQ,CAAC,IAAI,CAAC,UAAU;IAC/C,OAAO,KAAK,OAAO,EAAE,MAAM,MAAM;AACnC;AAEO,eAAe,eAAe,MAAc;IACjD,mGAAmG;IACnG,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oHAAQ,CACnC,IAAI,CAAC,WACL,MAAM,CAAC,+BACP,EAAE,CAAC,WAAW;IACjB,MAAM,SAAU,QAAQ,EAAE;IAC1B,IAAI,CAAC,SAAS,OAAO,MAAM,GAAG,GAAG,OAAO;IACxC,IAAI;QACF,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,MAAM,oHAAQ,CAAC,IAAI,CAAC,UAAU;QACxD,MAAM,QAAQ,QAAQ,OAAO,EAAE;QAC/B,IAAI,CAAC,OAAO,OAAO,QAAQ,gCAAgC;QAC3D,MAAM,MAAM,MAAM,MAAM,CAAC,qBAAqB,EAAE,KAAK,GAAG,IAAI,EAAE;YAC5D,SAAS;gBAAE,eAAe,CAAC,OAAO,EAAE,OAAO;YAAC;YAC5C,sCAAsC;YACtC,OAAO;QACT;QACA,IAAI,CAAC,IAAI,EAAE,EAAE,OAAO;QACpB,MAAM,UAAU,MAAM,IAAI,IAAI;QAC9B,OAAQ,QAAQ,OAAO,IAAI,EAAE;IAC/B,EAAE,OAAM;QACN,OAAO;IACT;AACF;AAEO,eAAe,mBAAmB,MAAc;IACrD,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oHAAQ,CACnC,IAAI,CAAC,eACL,MAAM,CAAC,wCACP,EAAE,CAAC,WAAW;IACjB,IAAI,OAAO,OAAO,EAAE;IACpB,OAAQ,QAAQ,EAAE;AACpB;AAEO,eAAe,eAAe,MAAc,EAAE,IAAY;IAC/D,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,oHAAQ,CACnC,IAAI,CAAC,aACL,MAAM,CAAC;QAAE,SAAS;QAAQ;IAAK,GAAG;QAAE,YAAY;IAAU,GAC1D,MAAM;IACT,IAAI,OAAO,OAAO;IAClB,OAAO,MAAM,CAAC,EAAE,IAAI;AACtB;AAEO,eAAe,kBAAkB,MAAc;IACpD,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,oHAAQ,CAC5B,IAAI,CAAC,aACL,MAAM,CAAC,uBACP,EAAE,CAAC,WAAW,QACd,KAAK,CAAC,GACN,WAAW;IACd,OAAO,QAAQ;AACjB","debugId":null}},
    {"offset": {"line": 268, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Documents/trae_projects/HYBRID%20TRADE%20AI/pages/plans.tsx"],"sourcesContent":["import PlanCard from '../components/PlanCard';\nimport { PLANS } from '../backend/profit-engine';\nimport { getCurrentUserId } from '../lib/db';\n\nexport default function Plans() {\n  const invest = async (planId: string) => {\n    try {\n      const userId = await getCurrentUserId();\n      if (!userId) {\n        alert('Please login to invest.');\n        return;\n      }\n      const res = await fetch('/api/deposit', {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ userId, amount: 100, currency: 'USD', provider: 'flutterwave', planId })\n      });\n      const data = await res.json();\n      alert(data.message || 'Deposit initiated');\n    } catch (e) {\n      alert('Failed to initiate deposit');\n    }\n  };\n\n  return (\n    <div>\n      <h2 className=\"text-3xl font-bold neon-text mb-6\">Choose your plan</h2>\n      <div className=\"grid md:grid-cols-2 lg:grid-cols-3 gap-6\">\n        {PLANS.map((plan) => (\n          <PlanCard key={plan.id} plan={plan} onInvest={invest} />\n        ))}\n      </div>\n      <div className=\"mt-8 card-neon\">\n        <h3 className=\"font-semibold\">Revenue Streams by Plan</h3>\n        <ul className=\"mt-2 text-sm text-white/80 space-y-1 list-disc list-inside\">\n          <li>Starter: 70% Ads & Tasks, 30% Trading</li>\n          <li>Pro: 60% Trading, 25% Copy-Trading, 15% Ads & Tasks</li>\n          <li>Elite: 50% Trading, 30% Staking/Yield, 20% AI/Copy-Trading</li>\n        </ul>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;;;;;;;;;AAEe,SAAS;IACtB,MAAM,SAAS,OAAO;QACpB,IAAI;YACF,MAAM,SAAS,MAAM,IAAA,sHAAgB;YACrC,IAAI,CAAC,QAAQ;gBACX,MAAM;gBACN;YACF;YACA,MAAM,MAAM,MAAM,MAAM,gBAAgB;gBACtC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;oBAAQ,QAAQ;oBAAK,UAAU;oBAAO,UAAU;oBAAe;gBAAO;YAC/F;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,MAAM,KAAK,OAAO,IAAI;QACxB,EAAE,OAAO,GAAG;YACV,MAAM;QACR;IACF;IAEA,qBACE,qKAAC;;0BACC,qKAAC;gBAAG,WAAU;0BAAoC;;;;;;0BAClD,qKAAC;gBAAI,WAAU;0BACZ,6HAAK,CAAC,GAAG,CAAC,CAAC,qBACV,qKAAC,2HAAQ;wBAAe,MAAM;wBAAM,UAAU;uBAA/B,KAAK,EAAE;;;;;;;;;;0BAG1B,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAG,WAAU;kCAAgB;;;;;;kCAC9B,qKAAC;wBAAG,WAAU;;0CACZ,qKAAC;0CAAG;;;;;;0CACJ,qKAAC;0CAAG;;;;;;0CACJ,qKAAC;0CAAG;;;;;;;;;;;;;;;;;;;;;;;;AAKd","debugId":null}}]
}