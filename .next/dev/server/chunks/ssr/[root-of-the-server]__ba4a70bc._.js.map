{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Documents/trae_projects/HYBRID%20TRADE%20AI/lib/supabase.ts"],"sourcesContent":["import { createClient } from '@supabase/supabase-js';\n\nconst supabaseUrl = process.env.NEXT_PUBLIC_SUPABASE_URL || process.env.SUPABASE_URL;\nconst supabaseAnonKey = process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY || process.env.SUPABASE_ANON_KEY;\n\nfunction makeStub() {\n  const noop = async () => ({ data: null, error: new Error('Supabase not configured') });\n  const auth = {\n    getSession: async () => ({ data: { session: null } }),\n    onAuthStateChange: () => ({ data: { subscription: { unsubscribe: () => {} } } }),\n    signUp: async () => ({ data: null, error: new Error('Supabase not configured') }),\n    signInWithPassword: async () => ({ data: null, error: new Error('Supabase not configured') })\n  };\n  const query = {\n    select: () => ({ eq: () => ({ limit: () => ({ maybeSingle: noop }) }), maybeSingle: noop }),\n    upsert: () => ({ select: noop }),\n    eq: () => ({ select: noop }),\n  } as any;\n  return { auth, from: () => query } as any;\n}\n\nexport const supabase = (supabaseUrl && supabaseAnonKey)\n  ? createClient(supabaseUrl, supabaseAnonKey, { auth: { persistSession: true, autoRefreshToken: true } })\n  : makeStub();\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM,cAAc,gFAAwC,QAAQ,GAAG,CAAC,YAAY;AACpF,MAAM,kBAAkB,wPAA6C,QAAQ,GAAG,CAAC,iBAAiB;AAElG,SAAS;IACP,MAAM,OAAO,UAAY,CAAC;YAAE,MAAM;YAAM,OAAO,IAAI,MAAM;QAA2B,CAAC;IACrF,MAAM,OAAO;QACX,YAAY,UAAY,CAAC;gBAAE,MAAM;oBAAE,SAAS;gBAAK;YAAE,CAAC;QACpD,mBAAmB,IAAM,CAAC;gBAAE,MAAM;oBAAE,cAAc;wBAAE,aAAa,KAAO;oBAAE;gBAAE;YAAE,CAAC;QAC/E,QAAQ,UAAY,CAAC;gBAAE,MAAM;gBAAM,OAAO,IAAI,MAAM;YAA2B,CAAC;QAChF,oBAAoB,UAAY,CAAC;gBAAE,MAAM;gBAAM,OAAO,IAAI,MAAM;YAA2B,CAAC;IAC9F;IACA,MAAM,QAAQ;QACZ,QAAQ,IAAM,CAAC;gBAAE,IAAI,IAAM,CAAC;wBAAE,OAAO,IAAM,CAAC;gCAAE,aAAa;4BAAK,CAAC;oBAAE,CAAC;gBAAG,aAAa;YAAK,CAAC;QAC1F,QAAQ,IAAM,CAAC;gBAAE,QAAQ;YAAK,CAAC;QAC/B,IAAI,IAAM,CAAC;gBAAE,QAAQ;YAAK,CAAC;IAC7B;IACA,OAAO;QAAE;QAAM,MAAM,IAAM;IAAM;AACnC;AAEO,MAAM,WAAW,uCACpB,IAAA,iKAAY,EAAC,aAAa,iBAAiB;IAAE,MAAM;QAAE,gBAAgB;QAAM,kBAAkB;IAAK;AAAE,KACpG","debugId":null}},
    {"offset": {"line": 106, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Documents/trae_projects/HYBRID%20TRADE%20AI/src/hooks/useUserNotifications.ts"],"sourcesContent":["import { useEffect, useMemo, useRef, useState } from 'react'\nimport { supabase } from '../../lib/supabase'\n\ntype NotificationItem = {\n  id: string\n  type: string\n  title: string\n  message: string\n  link?: string\n  read?: boolean\n  createdAt?: string\n}\n\nexport function useUserNotifications(userId?: string) {\n  const [items, setItems] = useState<NotificationItem[]>([])\n  const [connected, setConnected] = useState(false)\n  const [authed, setAuthed] = useState(false)\n  const bcRef = useRef<BroadcastChannel | null>(null)\n  const leaderRef = useRef(false)\n  const esRef = useRef<EventSource | null>(null)\n  const lastIdKey = useMemo(() => (userId ? `notifications:lastId:${userId}` : 'notifications:lastId'), [userId])\n\n  // Track Supabase auth state; only start polling/stream when authenticated\n  useEffect(() => {\n    let mounted = true\n    supabase.auth.getSession().then((res: any) => { if (mounted) setAuthed(!!res?.data?.session) }).catch(() => {})\n    const { data: sub } = supabase.auth.onAuthStateChange((_event: any, session: any) => { if (mounted) setAuthed(!!session) })\n    return () => { try { sub?.subscription?.unsubscribe() } catch {}; mounted = false }\n  }, [])\n\n  useEffect(() => {\n    if (!authed) { setConnected(false); return }\n    let mounted = true\n    const bc = new BroadcastChannel('notifications:user')\n    bcRef.current = bc\n\n    function onEvent(data: any) {\n      const id = String(data?.id || '')\n      if (!id) return\n      setItems((prev) => {\n        const exists = prev.some((p) => String(p.id) === id)\n        const next = exists ? prev.map((p) => (String(p.id) === id ? { ...p, ...data } : p)) : [data as NotificationItem, ...prev]\n        return next\n      })\n      try { localStorage.setItem(lastIdKey, id) } catch {}\n    }\n\n    async function becomeLeader() {\n      if (leaderRef.current) return\n      if (!mounted) return\n      leaderRef.current = true\n      const channel = bcRef.current ?? new BroadcastChannel('notifications:user')\n      bcRef.current = channel\n      try { channel.postMessage({ t: 'leader' }) } catch {}\n      const lastEventId = (() => { try { return localStorage.getItem(lastIdKey) || '' } catch { return '' } })()\n      const { data: sessionRes } = await supabase.auth.getSession()\n      const token = sessionRes?.session?.access_token || ''\n      const qp = new URLSearchParams()\n      if (lastEventId) qp.set('lastEventId', lastEventId)\n      if (token) qp.set('token', token)\n      const url = `/api/user/notifications/stream${qp.toString() ? `?${qp.toString()}` : ''}`\n      const es = new EventSource(url)\n      esRef.current = es\n      es.onopen = () => { if (mounted) setConnected(true) }\n      es.onmessage = (ev) => {\n        try { const data = JSON.parse(ev.data); onEvent(data); bc.postMessage({ t: 'event', data }) } catch {}\n      }\n      es.onerror = () => {}\n    }\n\n    let heardLeader = false\n    bc.onmessage = (ev) => {\n      const msg = ev.data || {}\n      if (!mounted) return\n      if (msg.t === 'leader') { heardLeader = true }\n      if (msg.t === 'event') { onEvent(msg.data) }\n    }\n    try { bc.postMessage({ t: 'who' }) } catch {}\n    const leaderTimeout = setTimeout(() => { if (!heardLeader) becomeLeader() }, 400)\n\n    async function maybeSynthKyc() {\n      try {\n        const { data: sessionRes } = await supabase.auth.getSession()\n        const uid = String(sessionRes?.session?.user?.id || '')\n        if (!uid) return\n        const { data: prof } = await supabase\n          .from('profiles')\n          .select('kyc_status')\n          .eq('user_id', uid)\n          .maybeSingle()\n        const k = String((prof as any)?.kyc_status || '')\n        const lastK = (() => { try { return localStorage.getItem('notifications:lastKyc') || '' } catch { return '' } })()\n        if (k && k !== lastK) {\n          const synthetic: NotificationItem = {\n            id: `synthetic:kyc:${Date.now()}`,\n            type: 'kyc_status',\n            title: k === 'approved' ? 'KYC Approved' : k === 'rejected' ? 'KYC Rejected' : 'KYC Updated',\n            message: k === 'approved' ? 'Your identity verification has been approved.' : k === 'rejected' ? 'Your KYC was rejected.' : 'Your KYC status was updated.',\n            read: false,\n            createdAt: new Date().toISOString(),\n          }\n          setItems((prev) => [synthetic, ...prev])\n          try { localStorage.setItem('notifications:lastKyc', k) } catch {}\n        }\n      } catch {}\n    }\n\n    ;(async () => {\n      try {\n        const { data: sessionRes } = await supabase.auth.getSession()\n        const token = sessionRes?.session?.access_token || ''\n        const res = await fetch('/api/user/notifications?limit=50&unreadOnly=false', { headers: token ? { Authorization: `Bearer ${token}` } : undefined })\n        const json = await res.json()\n        if (!mounted) return\n        const list: NotificationItem[] = Array.isArray(json?.items) ? json.items : []\n        setItems(list)\n        await maybeSynthKyc()\n      } catch {}\n    })()\n\n    const poll = setInterval(async () => {\n      try {\n        const { data: sessionRes } = await supabase.auth.getSession()\n        const token = sessionRes?.session?.access_token || ''\n        const res = await fetch('/api/user/notifications?limit=50&unreadOnly=false', { headers: token ? { Authorization: `Bearer ${token}` } : undefined })\n        const json = await res.json()\n        if (!mounted) return\n        const list: NotificationItem[] = Array.isArray(json?.items) ? json.items : []\n        setItems(list)\n        await maybeSynthKyc()\n      } catch {}\n    }, 10000)\n\n    return () => {\n      mounted = false\n      try { bc.close() } catch {}\n      try { esRef.current?.close() } catch {}\n      try { clearTimeout(leaderTimeout) } catch {}\n      try { clearInterval(poll) } catch {}\n    }\n  }, [authed, lastIdKey, userId])\n\n  const unreadCount = useMemo(() => items.filter((i) => !i.read).length, [items])\n\n  async function markRead(ids: string[]) {\n    if (!ids?.length) return\n    const prev = items\n    setItems((curr) => curr.map((c) => (ids.includes(String(c.id)) ? { ...c, read: true } : c)))\n    try {\n      const { data: sessionRes } = await supabase.auth.getSession()\n      const token = sessionRes?.session?.access_token || ''\n      const headers: Record<string, string> = { 'Content-Type': 'application/json' }\n      if (token) headers.Authorization = `Bearer ${token}`\n      const res = await fetch('/api/user/notifications/mark-read', { method: 'POST', headers, body: JSON.stringify({ ids }) })\n      if (!res.ok) throw new Error('failed')\n    } catch {\n      setItems(prev)\n    }\n  }\n\n  return { items, connected, unreadCount, markRead }\n}\n\nexport function useUnreadCount() {\n  const { unreadCount } = useUserNotifications()\n  return unreadCount\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 359, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Documents/trae_projects/HYBRID%20TRADE%20AI/app/components/NotificationCenter.tsx"],"sourcesContent":["\"use client\"\nimport { useMemo, useState } from 'react'\nimport { useUserNotifications } from '../../src/hooks/useUserNotifications'\n\nexport default function NotificationCenter() {\n  const { items, markRead } = useUserNotifications()\n  const [page, setPage] = useState(0)\n  const pageSize = 20\n  const pages = useMemo(() => Math.max(1, Math.ceil(items.length / pageSize)), [items.length])\n  const view = useMemo(() => items.slice(page * pageSize, (page + 1) * pageSize), [items, page])\n\n  const unreadIds = useMemo(() => items.filter((i) => !i.read).map((i) => String(i.id)), [items])\n\n  return (\n    <div className=\"rounded-xl bg-white/10 dark:bg-black/20 backdrop-blur-lg p-4 shadow-lg\">\n      <div className=\"flex items-center justify-between mb-3\">\n        <h2 className=\"text-lg font-semibold neon-text\">Notifications</h2>\n        <div className=\"flex items-center gap-2\">\n          <button className=\"btn-neon\" onClick={() => markRead(unreadIds)}>Mark all as read</button>\n        </div>\n      </div>\n      <div className=\"space-y-2\">\n        {view.map((n) => (\n          <div key={n.id} className=\"rounded-lg p-3 bg-white/5 flex items-start justify-between\">\n            <div>\n              <div className=\"text-sm font-medium\">{n.title}</div>\n              <div className=\"text-xs text-white/70\">{n.message}</div>\n            </div>\n            <div className=\"flex items-center gap-2\">\n              {String((n as any).event || '') === 'global' && (\n                <span className=\"inline-flex text-[10px] px-2 py-0.5 rounded bg-purple-600 text-white\">global</span>\n              )}\n              {!n.read && (\n                <span className=\"inline-flex text-[10px] px-2 py-0.5 rounded bg-neon-blue text-white\">new</span>\n              )}\n              <button className=\"text-xs hover:text-neon-blue\" onClick={() => markRead([String(n.id)])}>Mark read</button>\n            </div>\n          </div>\n        ))}\n        {view.length === 0 && (\n          <div className=\"text-sm text-white/70\">No notifications.</div>\n        )}\n      </div>\n      <div className=\"mt-4 flex items-center justify-between\">\n        <button className=\"btn-neon\" disabled={page <= 0} onClick={() => setPage((p) => Math.max(0, p - 1))}>Prev</button>\n        <div className=\"text-xs\">Page {page + 1} / {pages}</div>\n        <button className=\"btn-neon\" disabled={page + 1 >= pages} onClick={() => setPage((p) => Math.min(p + 1, pages - 1))}>Next</button>\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AAFA;;;;AAIe,SAAS;IACtB,MAAM,EAAE,KAAK,EAAE,QAAQ,EAAE,GAAG,IAAA,qJAAoB;IAChD,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+GAAQ,EAAC;IACjC,MAAM,WAAW;IACjB,MAAM,QAAQ,IAAA,8GAAO,EAAC,IAAM,KAAK,GAAG,CAAC,GAAG,KAAK,IAAI,CAAC,MAAM,MAAM,GAAG,YAAY;QAAC,MAAM,MAAM;KAAC;IAC3F,MAAM,OAAO,IAAA,8GAAO,EAAC,IAAM,MAAM,KAAK,CAAC,OAAO,UAAU,CAAC,OAAO,CAAC,IAAI,WAAW;QAAC;QAAO;KAAK;IAE7F,MAAM,YAAY,IAAA,8GAAO,EAAC,IAAM,MAAM,MAAM,CAAC,CAAC,IAAM,CAAC,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC,IAAM,OAAO,EAAE,EAAE,IAAI;QAAC;KAAM;IAE9F,qBACE,qKAAC;QAAI,WAAU;;0BACb,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAG,WAAU;kCAAkC;;;;;;kCAChD,qKAAC;wBAAI,WAAU;kCACb,cAAA,qKAAC;4BAAO,WAAU;4BAAW,SAAS,IAAM,SAAS;sCAAY;;;;;;;;;;;;;;;;;0BAGrE,qKAAC;gBAAI,WAAU;;oBACZ,KAAK,GAAG,CAAC,CAAC,kBACT,qKAAC;4BAAe,WAAU;;8CACxB,qKAAC;;sDACC,qKAAC;4CAAI,WAAU;sDAAuB,EAAE,KAAK;;;;;;sDAC7C,qKAAC;4CAAI,WAAU;sDAAyB,EAAE,OAAO;;;;;;;;;;;;8CAEnD,qKAAC;oCAAI,WAAU;;wCACZ,OAAO,AAAC,EAAU,KAAK,IAAI,QAAQ,0BAClC,qKAAC;4CAAK,WAAU;sDAAuE;;;;;;wCAExF,CAAC,EAAE,IAAI,kBACN,qKAAC;4CAAK,WAAU;sDAAsE;;;;;;sDAExF,qKAAC;4CAAO,WAAU;4CAA+B,SAAS,IAAM,SAAS;oDAAC,OAAO,EAAE,EAAE;iDAAE;sDAAG;;;;;;;;;;;;;2BAZpF,EAAE,EAAE;;;;;oBAgBf,KAAK,MAAM,KAAK,mBACf,qKAAC;wBAAI,WAAU;kCAAwB;;;;;;;;;;;;0BAG3C,qKAAC;gBAAI,WAAU;;kCACb,qKAAC;wBAAO,WAAU;wBAAW,UAAU,QAAQ;wBAAG,SAAS,IAAM,QAAQ,CAAC,IAAM,KAAK,GAAG,CAAC,GAAG,IAAI;kCAAK;;;;;;kCACrG,qKAAC;wBAAI,WAAU;;4BAAU;4BAAM,OAAO;4BAAE;4BAAI;;;;;;;kCAC5C,qKAAC;wBAAO,WAAU;wBAAW,UAAU,OAAO,KAAK;wBAAO,SAAS,IAAM,QAAQ,CAAC,IAAM,KAAK,GAAG,CAAC,IAAI,GAAG,QAAQ;kCAAK;;;;;;;;;;;;;;;;;;AAI7H","debugId":null}},
    {"offset": {"line": 559, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Documents/trae_projects/HYBRID%20TRADE%20AI/app/components/NotificationBell.tsx"],"sourcesContent":["\"use client\"\nimport { Bell } from 'lucide-react'\nimport { useState } from 'react'\nimport { useUserNotifications, useUnreadCount } from '../../src/hooks/useUserNotifications'\nimport NotificationCenter from './NotificationCenter'\n\ntype Props = { variant?: 'user' | 'admin' }\n\nexport default function NotificationBell({ variant = 'user' }: Props) {\n  const unread = useUnreadCount()\n  const { connected } = useUserNotifications()\n  const [open, setOpen] = useState(false)\n\n  return (\n    <div className=\"relative\">\n      <button className=\"relative inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 transition-colors\" onClick={() => setOpen((v) => !v)}>\n        <Bell className=\"w-5 h-5 text-neon-blue\" />\n        {connected && (\n          <span className=\"absolute -bottom-1 -right-1 text-[10px] px-1.5 py-0.5 rounded bg-green-500 text-white\">live</span>\n        )}\n      </button>\n      {unread > 0 && (\n        <span className=\"absolute -top-1 -right-1 min-w-[20px] h-5 px-1.5 rounded-full bg-neon-pink text-white text-xs flex items-center justify-center animate-pulse\">\n          {unread}\n        </span>\n      )}\n      {open && (\n        <div className=\"absolute right-0 mt-2 w-[360px] max-h-[60vh] overflow-auto rounded-xl bg-[#0a0f1b]/90 border border-white/10 shadow-xl p-3\">\n          <NotificationCenter />\n        </div>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AACA;AACA;AACA;AACA;AAJA;;;;;;AAQe,SAAS,iBAAiB,EAAE,UAAU,MAAM,EAAS;IAClE,MAAM,SAAS,IAAA,+IAAc;IAC7B,MAAM,EAAE,SAAS,EAAE,GAAG,IAAA,qJAAoB;IAC1C,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+GAAQ,EAAC;IAEjC,qBACE,qKAAC;QAAI,WAAU;;0BACb,qKAAC;gBAAO,WAAU;gBAA0H,SAAS,IAAM,QAAQ,CAAC,IAAM,CAAC;;kCACzK,qKAAC,mMAAI;wBAAC,WAAU;;;;;;oBACf,2BACC,qKAAC;wBAAK,WAAU;kCAAwF;;;;;;;;;;;;YAG3G,SAAS,mBACR,qKAAC;gBAAK,WAAU;0BACb;;;;;;YAGJ,sBACC,qKAAC;gBAAI,WAAU;0BACb,cAAA,qKAAC,4IAAkB;;;;;;;;;;;;;;;;AAK7B","debugId":null}},
    {"offset": {"line": 637, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Documents/trae_projects/HYBRID%20TRADE%20AI/components/Navbar.tsx"],"sourcesContent":["import Link from 'next/link';\nimport { useRouter } from 'next/router';\nimport { useEffect, useMemo, useState } from 'react';\nimport { Menu, X, Bot, ShieldCheck, ShieldAlert, ShieldX, IdCard } from 'lucide-react';\nimport NotificationBell from '../app/components/NotificationBell';\nimport { supabase } from '../lib/supabase';\n\nexport default function Navbar() {\n  const router = useRouter();\n  const [open, setOpen] = useState(false);\n  const [kyc, setKyc] = useState<string>('');\n  const kycColor = useMemo(() => (kyc === 'approved' ? 'text-green-500' : kyc === 'rejected' ? 'text-red-500' : kyc === 'pending' ? 'text-yellow-500' : 'text-neon-blue'), [kyc]);\n\n  useEffect(() => {\n    let mounted = true;\n    (async () => {\n      try {\n        const { data } = await supabase.auth.getSession();\n        const uid = String(data?.session?.user?.id || '');\n        if (!uid) return;\n        const { data: prof } = await supabase\n          .from('profiles')\n          .select('kyc_status')\n          .eq('user_id', uid)\n          .maybeSingle();\n        if (!mounted) return;\n        setKyc(String((prof as any)?.kyc_status || ''));\n      } catch {}\n    })();\n    return () => { mounted = false };\n  }, []);\n\n  return (\n    <nav className=\"w-full sticky top-0 z-30 bg-[#0a0f1b]/70 backdrop-blur-md border-b border-white/10\">\n      <div className=\"container-xl px-4 py-3 flex items-center justify-between\">\n        <Link href=\"/\" className=\"flex items-center gap-2\">\n          <Bot className=\"text-neon-blue\" />\n          <span className=\"font-bold text-xl neon-text\">HybridTradeAI</span>\n        </Link>\n\n        <div className=\"hidden md:flex items-center gap-6\">\n          <Link href=\"/plans\" className=\"hover:text-neon-blue\">Plans</Link>\n          <Link href=\"/dashboard\" className=\"hover:text-neon-blue\">Dashboard</Link>\n          <Link href=\"/kyc\" className=\"relative inline-flex items-center justify-center w-10 h-10 rounded-full bg-white/10 hover:bg-white/20 transition-colors\" title=\"KYC\" aria-label=\"KYC\">\n            {kyc === 'approved' ? <ShieldCheck className={`w-5 h-5 ${kycColor}`} /> : kyc === 'rejected' ? <ShieldX className={`w-5 h-5 ${kycColor}`} /> : kyc === 'pending' ? <ShieldAlert className={`w-5 h-5 ${kycColor}`} /> : <IdCard className={`w-5 h-5 ${kycColor}`} />}\n          </Link>\n          <NotificationBell />\n          <Link href=\"/auth/login\" className=\"btn-neon\">Login</Link>\n        </div>\n\n        <button aria-label=\"Toggle menu\" className=\"md:hidden\" onClick={() => setOpen(!open)}>\n          {open ? <X /> : <Menu />}\n        </button>\n      </div>\n\n      {open && (\n        <div className=\"md:hidden px-4 pb-4 flex flex-col gap-3\">\n          <Link href=\"/plans\" onClick={() => setOpen(false)} className=\"hover:text-neon-blue\">Plans</Link>\n          <Link href=\"/dashboard\" onClick={() => setOpen(false)} className=\"hover:text-neon-blue\">Dashboard</Link>\n          <Link href=\"/kyc\" onClick={() => setOpen(false)} className=\"hover:text-neon-blue\">KYC</Link>\n          <Link href=\"/auth/login\" onClick={() => setOpen(false)} className=\"btn-neon text-center\">Login</Link>\n        </div>\n      )}\n    </nav>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;;;;;;;AAEe,SAAS;IACtB,MAAM,SAAS,IAAA,oIAAS;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,+GAAQ,EAAC;IACjC,MAAM,CAAC,KAAK,OAAO,GAAG,IAAA,+GAAQ,EAAS;IACvC,MAAM,WAAW,IAAA,8GAAO,EAAC,IAAO,QAAQ,aAAa,mBAAmB,QAAQ,aAAa,iBAAiB,QAAQ,YAAY,oBAAoB,kBAAmB;QAAC;KAAI;IAE9K,IAAA,gHAAS,EAAC;QACR,IAAI,UAAU;QACd,CAAC;YACC,IAAI;gBACF,MAAM,EAAE,IAAI,EAAE,GAAG,MAAM,oHAAQ,CAAC,IAAI,CAAC,UAAU;gBAC/C,MAAM,MAAM,OAAO,MAAM,SAAS,MAAM,MAAM;gBAC9C,IAAI,CAAC,KAAK;gBACV,MAAM,EAAE,MAAM,IAAI,EAAE,GAAG,MAAM,oHAAQ,CAClC,IAAI,CAAC,YACL,MAAM,CAAC,cACP,EAAE,CAAC,WAAW,KACd,WAAW;gBACd,IAAI,CAAC,SAAS;gBACd,OAAO,OAAO,AAAC,MAAc,cAAc;YAC7C,EAAE,OAAM,CAAC;QACX,CAAC;QACD,OAAO;YAAQ,UAAU;QAAM;IACjC,GAAG,EAAE;IAEL,qBACE,qKAAC;QAAI,WAAU;;0BACb,qKAAC;gBAAI,WAAU;;kCACb,qKAAC,gIAAI;wBAAC,MAAK;wBAAI,WAAU;;0CACvB,qKAAC,gMAAG;gCAAC,WAAU;;;;;;0CACf,qKAAC;gCAAK,WAAU;0CAA8B;;;;;;;;;;;;kCAGhD,qKAAC;wBAAI,WAAU;;0CACb,qKAAC,gIAAI;gCAAC,MAAK;gCAAS,WAAU;0CAAuB;;;;;;0CACrD,qKAAC,gIAAI;gCAAC,MAAK;gCAAa,WAAU;0CAAuB;;;;;;0CACzD,qKAAC,gIAAI;gCAAC,MAAK;gCAAO,WAAU;gCAA0H,OAAM;gCAAM,cAAW;0CAC1K,QAAQ,2BAAa,qKAAC,4NAAW;oCAAC,WAAW,CAAC,QAAQ,EAAE,UAAU;;;;;2CAAO,QAAQ,2BAAa,qKAAC,gNAAO;oCAAC,WAAW,CAAC,QAAQ,EAAE,UAAU;;;;;2CAAO,QAAQ,0BAAY,qKAAC,4NAAW;oCAAC,WAAW,CAAC,QAAQ,EAAE,UAAU;;;;;yDAAO,qKAAC,6MAAM;oCAAC,WAAW,CAAC,QAAQ,EAAE,UAAU;;;;;;;;;;;0CAEjQ,qKAAC,0IAAgB;;;;;0CACjB,qKAAC,gIAAI;gCAAC,MAAK;gCAAc,WAAU;0CAAW;;;;;;;;;;;;kCAGhD,qKAAC;wBAAO,cAAW;wBAAc,WAAU;wBAAY,SAAS,IAAM,QAAQ,CAAC;kCAC5E,qBAAO,qKAAC,0LAAC;;;;iDAAM,qKAAC,mMAAI;;;;;;;;;;;;;;;;YAIxB,sBACC,qKAAC;gBAAI,WAAU;;kCACb,qKAAC,gIAAI;wBAAC,MAAK;wBAAS,SAAS,IAAM,QAAQ;wBAAQ,WAAU;kCAAuB;;;;;;kCACpF,qKAAC,gIAAI;wBAAC,MAAK;wBAAa,SAAS,IAAM,QAAQ;wBAAQ,WAAU;kCAAuB;;;;;;kCACxF,qKAAC,gIAAI;wBAAC,MAAK;wBAAO,SAAS,IAAM,QAAQ;wBAAQ,WAAU;kCAAuB;;;;;;kCAClF,qKAAC,gIAAI;wBAAC,MAAK;wBAAc,SAAS,IAAM,QAAQ;wBAAQ,WAAU;kCAAuB;;;;;;;;;;;;;;;;;;AAKnG","debugId":null}},
    {"offset": {"line": 881, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Documents/trae_projects/HYBRID%20TRADE%20AI/sentry.client.config.ts"],"sourcesContent":["import * as Sentry from '@sentry/nextjs'\n\ndeclare global {\n  // eslint-disable-next-line no-var\n  var __sentry_client_inited__: boolean | undefined\n}\n\nif (!globalThis.__sentry_client_inited__) {\n  Sentry.init({\n    dsn: process.env.SENTRY_DSN || undefined,\n    tracesSampleRate: Number(process.env.SENTRY_TRACES_SAMPLE_RATE ?? 0.2),\n    replaysSessionSampleRate: Number(process.env.SENTRY_REPLAYS_SESSION_SAMPLE_RATE ?? 0.1),\n    replaysOnErrorSampleRate: Number(process.env.SENTRY_REPLAYS_ON_ERROR_SAMPLE_RATE ?? 1.0),\n    environment: process.env.NODE_ENV,\n    enabled: Boolean(process.env.SENTRY_DSN),\n  })\n  globalThis.__sentry_client_inited__ = true\n}\n"],"names":[],"mappings":";AAAA;;AAOA,IAAI,CAAC,WAAW,wBAAwB,EAAE;IACxC,qIAAW,CAAC;QACV,KAAK,QAAQ,GAAG,CAAC,UAAU,IAAI;QAC/B,kBAAkB,OAAO,QAAQ,GAAG,CAAC,yBAAyB,IAAI;QAClE,0BAA0B,OAAO,QAAQ,GAAG,CAAC,kCAAkC,IAAI;QACnF,0BAA0B,OAAO,QAAQ,GAAG,CAAC,mCAAmC,IAAI;QACpF,WAAW;QACX,SAAS,QAAQ,QAAQ,GAAG,CAAC,UAAU;IACzC;IACA,WAAW,wBAAwB,GAAG;AACxC","debugId":null}},
    {"offset": {"line": 899, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Documents/trae_projects/HYBRID%20TRADE%20AI/sentry.server.config.ts"],"sourcesContent":["import * as Sentry from '@sentry/nextjs'\n\ndeclare global {\n  // eslint-disable-next-line no-var\n  var __sentry_server_inited__: boolean | undefined\n}\n\nif (!globalThis.__sentry_server_inited__) {\n  Sentry.init({\n    dsn: process.env.SENTRY_DSN || undefined,\n    tracesSampleRate: Number(process.env.SENTRY_TRACES_SAMPLE_RATE ?? 0.2),\n    environment: process.env.NODE_ENV,\n    enabled: Boolean(process.env.SENTRY_DSN),\n  })\n  globalThis.__sentry_server_inited__ = true\n}\n"],"names":[],"mappings":";AAAA;;AAOA,IAAI,CAAC,WAAW,wBAAwB,EAAE;IACxC,qIAAW,CAAC;QACV,KAAK,QAAQ,GAAG,CAAC,UAAU,IAAI;QAC/B,kBAAkB,OAAO,QAAQ,GAAG,CAAC,yBAAyB,IAAI;QAClE,WAAW;QACX,SAAS,QAAQ,QAAQ,GAAG,CAAC,UAAU;IACzC;IACA,WAAW,wBAAwB,GAAG;AACxC","debugId":null}},
    {"offset": {"line": 915, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/user/Documents/trae_projects/HYBRID%20TRADE%20AI/pages/_app.tsx"],"sourcesContent":["import type { AppProps } from 'next/app';\nimport '../styles/globals.css';\nimport Navbar from '../components/Navbar';\n// Initialize Sentry (client & server)\nimport '../sentry.client.config'\nimport '../sentry.server.config'\n\nexport default function App({ Component, pageProps }: AppProps) {\n  return (\n    <div className=\"min-h-screen\">\n      <Navbar />\n      <main className=\"container-xl px-4 py-6\">\n        <Component {...pageProps} />\n      </main>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA,sCAAsC;AACtC;AACA;;;;;;AAEe,SAAS,IAAI,EAAE,SAAS,EAAE,SAAS,EAAY;IAC5D,qBACE,qKAAC;QAAI,WAAU;;0BACb,qKAAC,yHAAM;;;;;0BACP,qKAAC;gBAAK,WAAU;0BACd,cAAA,qKAAC;oBAAW,GAAG,SAAS;;;;;;;;;;;;;;;;;AAIhC","debugId":null}}]
}