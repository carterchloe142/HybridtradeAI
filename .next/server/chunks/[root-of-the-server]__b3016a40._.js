module.exports=[94131,(e,t,r)=>{t.exports=e.x("@supabase/supabase-js",()=>require("@supabase/supabase-js"))},54799,(e,t,r)=>{t.exports=e.x("crypto",()=>require("crypto"))},76626,e=>{"use strict";var t=e.i(26747),r=e.i(90406),a=e.i(44898),i=e.i(62950),s=e.i(54799),n=e.i(94131);async function o(e,t){if("POST"!==e.method)return t.status(405).json({error:"Method not allowed"});let{userId:r,amountUSD:a=0}=e.body||{};if(!r)return t.status(400).json({error:"Missing userId"});let i=s.default.createHash("sha256").update(`${r}:${Date.now()}`).digest("hex").slice(0,8),o=Number((.05*a).toFixed(2)),l=process.env.SUPABASE_URL||"https://wdlcttgfwoejqynlylpv.supabase.co",d=process.env.SUPABASE_SERVICE_ROLE_KEY||process.env.SUPABASE_ANON_KEY||"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndkbGN0dGdmd29lanF5bmx5bHB2Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjI4ODE0MzAsImV4cCI6MjA3ODQ1NzQzMH0.UZaY0iYoVRS5MioS5Clg6y_CVNdgzm-3OdB_cwWuB8E";{let e=(0,n.createClient)(l,d);try{await e.from("referrals").upsert({user_id:r,code:i},{onConflict:"user_id"})}catch(e){}}return t.status(200).json({ok:!0,referralCode:i,creditedUSD:o})}e.s(["default",()=>o],48828);var l=e.i(48828),d=e.i(7031),u=e.i(81927),p=e.i(46432);let c=(0,i.hoist)(l,"default"),h=(0,i.hoist)(l,"config"),f=new a.PagesAPIRouteModule({definition:{kind:r.RouteKind.PAGES_API,page:"/api/referral",pathname:"/api/referral",bundlePath:"",filename:""},userland:l,distDir:".next",relativeProjectDir:""});async function m(e,r,a){f.isDev&&(0,p.addRequestMeta)(e,"devRequestTimingInternalsEnd",process.hrtime.bigint());let i="/api/referral";i=i.replace(/\/index$/,"")||"/";let s=await f.prepare(e,r,{srcPage:i});if(!s){r.statusCode=400,r.end("Bad Request"),null==a.waitUntil||a.waitUntil.call(a,Promise.resolve());return}let{query:n,params:o,prerenderManifest:l,routerServerContext:c}=s;try{let t=e.method||"GET",a=(0,d.getTracer)(),s=a.getActiveScopeSpan(),p=f.instrumentationOnRequestError.bind(f),h=async s=>f.render(e,r,{query:{...n,...o},params:o,allowedRevalidateHeaderKeys:[],multiZoneDraftMode:!1,trustHostHeader:!1,previewProps:l.preview,propagateError:!1,dev:f.isDev,page:"/api/referral",internalRevalidate:null==c?void 0:c.revalidate,onError:(...t)=>p(e,...t)}).finally(()=>{if(!s)return;s.setAttributes({"http.status_code":r.statusCode,"next.rsc":!1});let e=a.getRootSpanAttributes();if(!e)return;if(e.get("next.span_type")!==u.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${e.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let n=e.get("next.route");if(n){let e=`${t} ${n}`;s.setAttributes({"next.route":n,"http.route":n,"next.span_name":e}),s.updateName(e)}else s.updateName(`${t} ${i}`)});s?await h(s):await a.withPropagatedContext(e.headers,()=>a.trace(u.BaseServerSpan.handleRequest,{spanName:`${t} ${i}`,kind:d.SpanKind.SERVER,attributes:{"http.method":t,"http.target":e.url}},h))}catch(e){if(f.isDev)throw e;(0,t.sendError)(r,500,"Internal Server Error")}finally{null==a.waitUntil||a.waitUntil.call(a,Promise.resolve())}}e.s(["config",0,h,"default",0,c,"handler",()=>m],76626)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b3016a40._.js.map