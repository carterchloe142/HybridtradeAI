module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},75050,a=>{"use strict";var b=a.i(8171),c=a.i(27669),d=a.i(76165);function e({children:a}){let[e,f]=(0,c.useState)("loading");return((0,c.useEffect)(()=>{let a=!0;return async function(){let{data:b}=await d.supabase.auth.getSession(),c=b.session?.user;if(!c){a&&f("noauth");return}let{data:e}=await d.supabase.from("profiles").select("role,is_admin").eq("user_id",c.id).maybeSingle(),g=!!e?.is_admin||"admin"===String(e?.role||"").toLowerCase();a&&f(g?"ok":"forbidden")}(),()=>{a=!1}},[]),"loading"===e)?(0,b.jsx)("div",{className:"p-6",children:"Checking permissions…"}):"noauth"===e?(0,b.jsx)("div",{className:"p-6",children:"Sign in required."}):"forbidden"===e?(0,b.jsx)("div",{className:"p-6",children:"Not authorized."}):(0,b.jsx)(b.Fragment,{children:a})}a.s(["default",()=>e])},34791,a=>a.a(async(b,c)=>{try{let b=await a.y("framer-motion");a.n(b),c()}catch(a){c(a)}},!0),22574,a=>{"use strict";var b=a.i(8171),c=a.i(76165),d=a.i(1257);function e({onQuickRun:a}){async function e(){await c.supabase.auth.signOut(),window.location.href="/auth/login"}return(0,b.jsxs)("div",{className:"glass rounded-2xl p-4 flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-xl font-bold neon-text",children:"Admin Panel"}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(d.default,{href:"/admin/performance",className:"btn-neon",children:"Update Performance"}),a&&(0,b.jsx)("button",{className:"btn-neon",onClick:a,children:"Quick Run Profit"}),(0,b.jsx)("button",{className:"btn-neon",onClick:e,children:"Logout"})]})]})}a.s(["default",()=>e])},89021,a=>{"use strict";var b=a.i(8171),c=a.i(1257);let d=[{path:"/admin",label:"Dashboard",icon:"dashboard"},{path:"/admin/users",label:"Users",icon:"users"},{path:"/admin/kyc",label:"KYC",icon:"shield"},{path:"/admin/deposits",label:"Deposits",icon:"deposit"},{path:"/admin/withdrawals",label:"Withdrawals",icon:"withdraw"},{path:"/admin/profit-engine",label:"ProfitEngine",icon:"profit"},{path:"/admin/performance",label:"Performance",icon:"chart"},{path:"/admin/plans",label:"Plans",icon:"plans"},{path:"/admin/transactions",label:"Transactions",icon:"ledger"},{path:"/admin/proof",label:"Proof",icon:"proof"},{path:"/admin/support",label:"Support",icon:"support"},{path:"/admin/settings",label:"Settings",icon:"settings"},{path:"/admin/logs",label:"Logs",icon:"logs"}];function e(){return(0,b.jsx)("aside",{className:"p-4 glass rounded-2xl min-h-[60vh]",children:(0,b.jsx)("nav",{className:"space-y-2",children:d.map(a=>(0,b.jsx)(c.default,{href:a.path,className:"block px-3 py-2 rounded-lg hover:bg-white/10",children:(0,b.jsx)("span",{className:"text-white/90",children:a.label})},a.path))})})}a.s(["default",()=>e],89021)},92214,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(34791),f=b([e]);function g({title:a,value:b,sublabel:c}){return(0,d.jsxs)(e.motion.div,{className:"card-neon",initial:{opacity:0,y:8},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.4},children:[(0,d.jsx)("h3",{className:"font-semibold",children:a}),(0,d.jsx)("p",{className:"mt-2 text-2xl font-bold text-neon-blue",children:b}),c&&(0,d.jsx)("p",{className:"mt-1 text-xs text-white/60",children:c})]})}[e]=f.then?(await f)():f,a.s(["default",()=>g]),c()}catch(a){c(a)}},!1),59250,a=>a.a(async(b,c)=>{try{var d=a.i(8171),e=a.i(27669),f=a.i(75050),g=a.i(76165),h=a.i(22574),i=a.i(89021),j=a.i(92214),k=b([j]);function l(){let[a,b]=(0,e.useState)({}),[c,k]=(0,e.useState)(""),[l,m]=(0,e.useState)(!1),[n,o]=(0,e.useState)(!1),[p,q]=(0,e.useState)(!0);async function r(){m(!0),k("");try{let{data:a}=await g.supabase.auth.getSession(),b=a.session?.access_token;if(!b)throw Error("Missing session token.");let c=await fetch("/api/admin/run-cycle",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({})}),d=await c.json();if(!c.ok)throw Error(d?.error||"Failed");k("Run cycle executed successfully.")}catch(a){k(a?.message||"Error running cycle")}finally{m(!1)}}async function s(){o(!0),k("");try{let{data:a}=await g.supabase.auth.getSession(),b=a.session?.access_token;if(!b)throw Error("Missing session token.");let c=`/api/admin/distribute-profits${p?"?dryRun=true":""}`,d=await fetch(c,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify({})}),e=await d.json();if(!d.ok)throw Error(e?.error||"Failed");k(p?"Dry run completed. Check logs/output.":"Profit distribution executed successfully.")}catch(a){k(a?.message||"Error distributing profits")}finally{o(!1)}}return(0,e.useEffect)(()=>{(async()=>{try{let{data:a}=await g.supabase.from("performance").select("week_ending").order("week_ending",{ascending:!1}).limit(1),c=a?.[0]?.week_ending??null,{data:d}=await g.supabase.from("investments").select("id,status").eq("status","active"),e=(d||[]).length;b({latestWeek:c,activeInvestments:e})}catch(a){}})()},[]),(0,d.jsx)(f.default,{children:(0,d.jsxs)("div",{className:"grid md:grid-cols-[260px,1fr] gap-6 p-6",children:[(0,d.jsx)("div",{children:(0,d.jsx)(i.default,{})}),(0,d.jsxs)("div",{className:"space-y-6",children:[(0,d.jsx)(h.default,{onQuickRun:s}),(0,d.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,d.jsx)(j.default,{title:"Latest Performance Week",value:a.latestWeek||"—"}),(0,d.jsx)(j.default,{title:"Active Investments",value:a.activeInvestments??"—"}),(0,d.jsx)(j.default,{title:"Dry Run",value:p?"On":"Off"})]}),(0,d.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,d.jsxs)("div",{className:"card-neon",children:[(0,d.jsx)("h3",{className:"font-semibold",children:"Distribute Weekly Profits"}),(0,d.jsx)("p",{className:"mt-2 text-sm text-white/80",children:"Requires performance data for the latest week."}),(0,d.jsxs)("label",{className:"mt-3 inline-flex items-center gap-2 text-sm",children:[(0,d.jsx)("input",{type:"checkbox",checked:p,onChange:a=>q(a.target.checked)})," Dry run"]}),(0,d.jsx)("button",{className:"btn-neon mt-4",onClick:s,disabled:n,children:n?"Processing...":p?"Simulate Distribution":"Execute Distribution"})]}),(0,d.jsxs)("div",{className:"card-neon",children:[(0,d.jsx)("h3",{className:"font-semibold",children:"Run Cycle"}),(0,d.jsx)("p",{className:"mt-2 text-sm text-white/80",children:"Handles day 7 ROI crediting and day 14 principal release."}),(0,d.jsx)("button",{className:"btn-neon mt-4",onClick:r,disabled:l,children:l?"Running...":"Run Cycle Now"})]})]}),c&&(0,d.jsx)("p",{className:"text-sm mt-2",children:c})]})]})})}[j]=k.then?(await k)():k,a.s(["default",()=>l]),c()}catch(a){c(a)}},!1),83750,a=>a.a(async(b,c)=>{try{var d=a.i(79168),e=a.i(27068),f=a.i(32759),g=a.i(39141),h=a.i(67298),i=a.i(59250),j=a.i(9193),k=b([i]);[i]=k.then?(await k)():k;let l=(0,f.hoist)(i,"default"),m=(0,f.hoist)(i,"getStaticProps"),n=(0,f.hoist)(i,"getStaticPaths"),o=(0,f.hoist)(i,"getServerSideProps"),p=(0,f.hoist)(i,"config"),q=(0,f.hoist)(i,"reportWebVitals"),r=(0,f.hoist)(i,"unstable_getStaticProps"),s=(0,f.hoist)(i,"unstable_getStaticPaths"),t=(0,f.hoist)(i,"unstable_getStaticParams"),u=(0,f.hoist)(i,"unstable_getServerProps"),v=(0,f.hoist)(i,"unstable_getServerSideProps"),w=new d.PagesRouteModule({definition:{kind:e.RouteKind.PAGES,page:"/admin/index",pathname:"/admin",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:h.default,Document:g.default},userland:i}),x=(0,j.getHandler)({srcPage:"/admin/index",config:p,userland:i,routeModule:w,getStaticPaths:n,getStaticProps:m,getServerSideProps:o});a.s(["config",0,p,"default",0,l,"getServerSideProps",0,o,"getStaticPaths",0,n,"getStaticProps",0,m,"handler",0,x,"reportWebVitals",0,q,"routeModule",0,w,"unstable_getServerProps",0,u,"unstable_getServerSideProps",0,v,"unstable_getStaticParams",0,t,"unstable_getStaticPaths",0,s,"unstable_getStaticProps",0,r]),c()}catch(a){c(a)}},!1)];

//# sourceMappingURL=%5Broot-of-the-server%5D__d7bda9a0._.js.map