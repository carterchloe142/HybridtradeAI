{"version":3,"sources":["turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/module.compiled.js","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-runtime.ts","turbopack:///[project]/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts","turbopack:///[project]/app/admin/notifications/page.tsx"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.ReactJsxRuntime\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['react-ssr']!.React\n","'use client'\nimport useSWR from 'swr'\nimport { useMemo, useState } from 'react'\n\nconst fetcher = (url: string) => fetch(url).then((r) => r.json())\n\ntype Item = { id: string; type: string; title: string; message: string; createdAt: string; read?: boolean }\n\nexport default function AdminNotificationsPage() {\n  const [scope, setScope] = useState<'personal' | 'global'>('personal')\n  const [type, setType] = useState<string>('')\n  const [unreadOnly, setUnreadOnly] = useState<boolean>(false)\n  const qs = useMemo(() => {\n    const p = new URLSearchParams()\n    p.set('scope', scope)\n    if (type) p.set('type', type)\n    if (unreadOnly) p.set('unreadOnly', 'true')\n    p.set('limit', '50')\n    return p.toString()\n  }, [scope, type, unreadOnly])\n  const { data, mutate } = useSWR(`/api/admin/notifications?${qs}`, fetcher)\n  const items: Item[] = Array.isArray(data?.items) ? data.items : []\n  const [selected, setSelected] = useState<string[]>([])\n\n  async function markSelectedRead() {\n    if (scope !== 'personal' || selected.length === 0) return\n    await fetch('/api/admin/notifications/mark-read', { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ ids: selected }) })\n    setSelected([])\n    mutate()\n  }\n\n  return (\n    <div className=\"p-6\">\n      <h1 className=\"text-2xl font-semibold mb-4\">Admin Notifications</h1>\n      <div className=\"flex flex-wrap items-center gap-3 mb-4\">\n        <label className=\"text-sm\">Scope</label>\n        <select className=\"px-3 py-2 rounded border border-white/10 bg-black/20\" value={scope} onChange={(e) => setScope(e.target.value as any)}>\n          <option value=\"personal\">Personal</option>\n          <option value=\"global\">Global</option>\n        </select>\n        <label className=\"text-sm\">Type</label>\n        <input className=\"px-3 py-2 rounded border border-white/10 bg-black/20\" placeholder=\"type\" value={type} onChange={(e) => setType(e.target.value)} />\n        {scope === 'personal' && (\n          <label className=\"flex items-center gap-2 text-sm\"><input type=\"checkbox\" checked={unreadOnly} onChange={(e) => setUnreadOnly(e.target.checked)} /> Unread only</label>\n        )}\n        {scope === 'personal' && (\n          <button className=\"px-4 py-2 rounded bg-blue-600\" disabled={selected.length === 0} onClick={markSelectedRead}>Mark selected read</button>\n        )}\n      </div>\n\n      <div className=\"rounded-xl bg-white/5 dark:bg-black/20 backdrop-blur-lg border border-white/10\">\n        <table className=\"w-full text-sm\">\n          <thead className=\"text-left\">\n            <tr>\n              {scope === 'personal' && <th className=\"p-3\">Select</th>}\n              <th className=\"p-3\">Type</th>\n              <th className=\"p-3\">Title</th>\n              <th className=\"p-3\">Message</th>\n              <th className=\"p-3\">Created</th>\n              {scope === 'personal' && <th className=\"p-3\">Read</th>}\n            </tr>\n          </thead>\n          <tbody>\n            {items.map((n: any) => (\n              <tr key={n.id} className=\"hover:bg-white/10\">\n                {scope === 'personal' && (\n                  <td className=\"p-3\">\n                    <input type=\"checkbox\" checked={selected.includes(n.id)} onChange={(e) => {\n                      if (e.target.checked) setSelected((s) => [...s, n.id])\n                      else setSelected((s) => s.filter((x) => x !== n.id))\n                    }} />\n                  </td>\n                )}\n                <td className=\"p-3\">{n.type}</td>\n                <td className=\"p-3\">{n.title}</td>\n                <td className=\"p-3\">{n.message}</td>\n                <td className=\"p-3\">{n.createdAt ? new Date(n.createdAt).toLocaleString() : ''}</td>\n                {scope === 'personal' && <td className=\"p-3\">{n.read ? 'Yes' : 'No'}</td>}\n              </tr>\n            ))}\n            {items.length === 0 && (\n              <tr><td className=\"p-3\" colSpan={scope === 'personal' ? 6 : 5}>No notifications</td></tr>\n            )}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  )\n}\n\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK","vendored","ReactJsxRuntime","React"],"mappings":"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","ignoreList":[0,1,2]}