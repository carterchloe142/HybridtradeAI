module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},75050,a=>{"use strict";var b=a.i(8171),c=a.i(27669),d=a.i(76165);function e({children:a}){let[e,f]=(0,c.useState)("loading");return((0,c.useEffect)(()=>{let a=!0;return async function(){let{data:b}=await d.supabase.auth.getSession(),c=b.session?.user;if(!c){a&&f("noauth");return}let{data:e}=await d.supabase.from("profiles").select("role,is_admin").eq("user_id",c.id).maybeSingle(),g=!!e?.is_admin||"admin"===String(e?.role||"").toLowerCase();a&&f(g?"ok":"forbidden")}(),()=>{a=!1}},[]),"loading"===e)?(0,b.jsx)("div",{className:"p-6",children:"Checking permissions…"}):"noauth"===e?(0,b.jsx)("div",{className:"p-6",children:"Sign in required."}):"forbidden"===e?(0,b.jsx)("div",{className:"p-6",children:"Not authorized."}):(0,b.jsx)(b.Fragment,{children:a})}a.s(["default",()=>e])},88438,a=>{"use strict";var b=a.i(79168),c=a.i(27068),d=a.i(32759),e=a.i(39141),f=a.i(67298),g=a.i(8171),h=a.i(27669),i=a.i(75050),j=a.i(76165);function k(){let[a,b]=(0,h.useState)([]),[c,d]=(0,h.useState)(!0),[e,f]=(0,h.useState)(""),[k,l]=(0,h.useState)("");async function m(){d(!0);let a=j.supabase.from("transactions").select(`
        id,user_id,type,amount,currency,status,tx_hash,created_at,
        profiles(email)
      `).order("created_at",{ascending:!1});e&&(a=a.eq("type",e)),k&&(a=a.eq("status",k));let{data:c,error:f}=await a;f?console.error(f):b(c||[]),d(!1)}return(0,h.useEffect)(()=>{m()},[e,k]),(0,g.jsx)(i.default,{children:(0,g.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,g.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Transactions"}),(0,g.jsxs)("div",{className:"flex gap-3 mb-4",children:[(0,g.jsxs)("select",{className:"border rounded px-2 py-1 text-sm",value:e,onChange:a=>f(a.target.value),children:[(0,g.jsx)("option",{value:"",children:"All types"}),(0,g.jsx)("option",{value:"deposit",children:"Deposit"}),(0,g.jsx)("option",{value:"withdrawal",children:"Withdrawal"}),(0,g.jsx)("option",{value:"profit",children:"Profit"}),(0,g.jsx)("option",{value:"referral",children:"Referral"})]}),(0,g.jsxs)("select",{className:"border rounded px-2 py-1 text-sm",value:k,onChange:a=>l(a.target.value),children:[(0,g.jsx)("option",{value:"",children:"All statuses"}),(0,g.jsx)("option",{value:"pending",children:"Pending"}),(0,g.jsx)("option",{value:"confirmed",children:"Confirmed"}),(0,g.jsx)("option",{value:"cancelled",children:"Cancelled"}),(0,g.jsx)("option",{value:"failed",children:"Failed"})]})]}),c&&(0,g.jsx)("p",{className:"text-sm",children:"Loading…"}),(0,g.jsx)("div",{className:"overflow-auto",children:(0,g.jsxs)("table",{className:"min-w-full table-auto text-sm",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"bg-gray-100 text-black",children:[(0,g.jsx)("th",{className:"px-2 py-1 text-left",children:"User"}),(0,g.jsx)("th",{className:"px-2 py-1 text-left",children:"Type"}),(0,g.jsx)("th",{className:"px-2 py-1 text-left",children:"Amount"}),(0,g.jsx)("th",{className:"px-2 py-1 text-left",children:"Currency"}),(0,g.jsx)("th",{className:"px-2 py-1 text-left",children:"Status"}),(0,g.jsx)("th",{className:"px-2 py-1 text-left",children:"Tx Hash"}),(0,g.jsx)("th",{className:"px-2 py-1 text-left",children:"Created"})]})}),(0,g.jsx)("tbody",{children:a.map(a=>(0,g.jsxs)("tr",{className:"border-t",children:[(0,g.jsx)("td",{className:"px-2 py-1",children:a.profiles?.email||a.user_id}),(0,g.jsx)("td",{className:"px-2 py-1",children:a.type}),(0,g.jsx)("td",{className:"px-2 py-1",children:a.amount}),(0,g.jsx)("td",{className:"px-2 py-1 uppercase",children:a.currency}),(0,g.jsx)("td",{className:"px-2 py-1",children:(0,g.jsx)("span",{className:`inline-block px-2 rounded text-xs ${"confirmed"===a.status?"bg-green-100 text-green-800":"cancelled"===a.status||"failed"===a.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"}`,children:a.status})}),(0,g.jsx)("td",{className:"px-2 py-1 text-xs",children:a.tx_hash?`${a.tx_hash.slice(0,8)}…${a.tx_hash.slice(-6)}`:"-"}),(0,g.jsx)("td",{className:"px-2 py-1",children:new Date(a.created_at).toLocaleString()})]},a.id))})]})})]})})}a.s(["default",()=>k],65372);var l=a.i(65372),m=a.i(9193);let n=(0,d.hoist)(l,"default"),o=(0,d.hoist)(l,"getStaticProps"),p=(0,d.hoist)(l,"getStaticPaths"),q=(0,d.hoist)(l,"getServerSideProps"),r=(0,d.hoist)(l,"config"),s=(0,d.hoist)(l,"reportWebVitals"),t=(0,d.hoist)(l,"unstable_getStaticProps"),u=(0,d.hoist)(l,"unstable_getStaticPaths"),v=(0,d.hoist)(l,"unstable_getStaticParams"),w=(0,d.hoist)(l,"unstable_getServerProps"),x=(0,d.hoist)(l,"unstable_getServerSideProps"),y=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/admin/transactions",pathname:"/admin/transactions",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:l}),z=(0,m.getHandler)({srcPage:"/admin/transactions",config:r,userland:l,routeModule:y,getStaticPaths:p,getStaticProps:o,getServerSideProps:q});a.s(["config",0,r,"default",0,n,"getServerSideProps",0,q,"getStaticPaths",0,p,"getStaticProps",0,o,"handler",0,z,"reportWebVitals",0,s,"routeModule",0,y,"unstable_getServerProps",0,w,"unstable_getServerSideProps",0,x,"unstable_getStaticParams",0,v,"unstable_getStaticPaths",0,u,"unstable_getStaticProps",0,t],88438)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__60dd20d2._.js.map