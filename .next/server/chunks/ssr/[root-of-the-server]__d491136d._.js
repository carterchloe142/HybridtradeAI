module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},98527,a=>{"use strict";var b=a.i(8171),c=a.i(27669),d=a.i(76165),e=a.i(41910);function f({children:a}){let f=(0,e.useRouter)(),[g,h]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{let a=!0;d.supabase.auth.getSession().then(b=>{b.data?.session?a&&h(!0):f.replace("/auth/login")});let{data:b}=d.supabase.auth.onAuthStateChange((a,b)=>{b||f.replace("/auth/login")});return()=>{b?.subscription?.unsubscribe(),a=!1}},[f]),g)?(0,b.jsx)(b.Fragment,{children:a}):(0,b.jsx)("div",{className:"card-neon text-center",children:(0,b.jsx)("p",{children:"Checking your session..."})})}a.s(["default",()=>f])},94139,a=>{"use strict";var b=a.i(76165);async function c(){let{data:a}=await b.supabase.auth.getSession();return a.session?.user?.id??null}async function d(a){let{data:c,error:d}=await b.supabase.from("wallets").select("id,user_id,currency,balance").eq("user_id",a),e=c??[];if(!d&&e.length>0)return e;try{let{data:a}=await b.supabase.auth.getSession(),c=a.session?.access_token;if(!c)return e;let d=await fetch(`/api/user/wallets?ts=${Date.now()}`,{headers:{Authorization:`Bearer ${c}`},cache:"no-store"});if(!d.ok)return e;return(await d.json()).wallets??[]}catch{return e}}async function e(a){let{data:c,error:d}=await b.supabase.from("investments").select("id,user_id,plan_id,amount_usd,status").eq("user_id",a);return d?[]:c??[]}async function f(a){let{data:c}=await b.supabase.from("referrals").select("code,total_earnings").eq("user_id",a).limit(1).maybeSingle();return c??null}a.s(["getCurrentUserId",()=>c,"getReferralByUser",()=>f,"getUserInvestments",()=>e,"getUserWallets",()=>d])},62910,a=>{"use strict";var b=a.i(79168),c=a.i(27068),d=a.i(32759),e=a.i(39141),f=a.i(67298),g=a.i(8171),h=a.i(98527),i=a.i(27669),j=a.i(94139);function k(){let[a,b]=(0,i.useState)(null),[c,d]=(0,i.useState)(null),[e,f]=(0,i.useState)(!1),[k,l]=(0,i.useState)(!1),[m,n]=(0,i.useState)("");(0,i.useEffect)(()=>{(async()=>{let a=await (0,j.getCurrentUserId)();if(b(a),a){let b=await (0,j.getReferralByUser)(a);b?.code&&d(b.code)}})()},[]);let o=async()=>{if(a)try{f(!0);let b=await fetch("/api/referral",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:a})}),c=await b.json();d(c.referralCode)}finally{f(!1)}},p=c?`http://localhost:3000/auth/register?ref=${c}`:"",q=async()=>{if(p)try{await navigator.clipboard.writeText(p),l(!0),setTimeout(()=>l(!1),1500)}catch{}},r=async()=>{if(p){n("");try{navigator.share?await navigator.share({title:"Join HybridTradeAI",url:p}):(await navigator.clipboard.writeText(p),l(!0),setTimeout(()=>l(!1),1500))}catch(a){n(a?.message||"Unable to share")}}};return(0,g.jsx)(h.default,{children:(0,g.jsxs)("div",{className:"max-w-xl mx-auto space-y-6",children:[(0,g.jsxs)("div",{className:"card-neon",children:[(0,g.jsx)("h2",{className:"text-2xl font-bold neon-text",children:"Your Profile"}),(0,g.jsxs)("p",{className:"mt-2 text-sm text-white/80",children:["User ID: ",a]})]}),(0,g.jsxs)("div",{className:"card-neon",children:[(0,g.jsx)("h3",{className:"font-semibold",children:"Referral"}),c?(0,g.jsxs)("div",{className:"mt-2",children:[(0,g.jsxs)("p",{className:"text-sm",children:["Code: ",(0,g.jsx)("span",{className:"text-neon-blue",children:c})]}),(0,g.jsxs)("p",{className:"text-sm break-all",children:["Link: ",(0,g.jsx)("a",{className:"text-neon-blue",href:p,children:p})]}),(0,g.jsxs)("div",{className:"mt-3 flex gap-3",children:[(0,g.jsx)("button",{className:"btn-neon",onClick:q,children:"Copy Link"}),(0,g.jsx)("button",{className:"btn-neon",onClick:r,children:"Share"})]}),k&&(0,g.jsx)("p",{className:"mt-2 text-xs text-neon-blue",children:"Copied!"}),m&&(0,g.jsx)("p",{className:"mt-2 text-xs text-red-400",children:m})]}):(0,g.jsx)("button",{className:"btn-neon mt-3",onClick:o,disabled:e,children:e?"Generating...":"Generate Referral Code"})]})]})})}a.s(["default",()=>k],86823);var l=a.i(86823),m=a.i(9193);let n=(0,d.hoist)(l,"default"),o=(0,d.hoist)(l,"getStaticProps"),p=(0,d.hoist)(l,"getStaticPaths"),q=(0,d.hoist)(l,"getServerSideProps"),r=(0,d.hoist)(l,"config"),s=(0,d.hoist)(l,"reportWebVitals"),t=(0,d.hoist)(l,"unstable_getStaticProps"),u=(0,d.hoist)(l,"unstable_getStaticPaths"),v=(0,d.hoist)(l,"unstable_getStaticParams"),w=(0,d.hoist)(l,"unstable_getServerProps"),x=(0,d.hoist)(l,"unstable_getServerSideProps"),y=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/profile",pathname:"/profile",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:l}),z=(0,m.getHandler)({srcPage:"/profile",config:r,userland:l,routeModule:y,getStaticPaths:p,getStaticProps:o,getServerSideProps:q});a.s(["config",0,r,"default",0,n,"getServerSideProps",0,q,"getStaticPaths",0,p,"getStaticProps",0,o,"handler",0,z,"reportWebVitals",0,s,"routeModule",0,y,"unstable_getServerProps",0,w,"unstable_getServerSideProps",0,x,"unstable_getStaticParams",0,v,"unstable_getStaticPaths",0,u,"unstable_getStaticProps",0,t],62910)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__d491136d._.js.map