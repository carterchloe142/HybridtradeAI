module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},42602,(a,b,c)=>{"use strict";b.exports=a.r(18622)},87924,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].ReactJsxRuntime},72131,(a,b,c)=>{"use strict";b.exports=a.r(42602).vendored["react-ssr"].React},33041,a=>{"use strict";var b=a.i(87924),c=a.i(72596),d=a.i(72131);let e=a=>fetch(a).then(a=>a.json());function f(){let{data:a,mutate:f}=(0,c.default)("/api/admin/queue/stats",e,{refreshInterval:5e3}),[g,h]=(0,d.useState)("waiting"),{data:i,mutate:j}=(0,c.default)(`/api/admin/queue/jobs?status=${g}&limit=20`,e,{refreshInterval:5e3}),{data:k}=(0,c.default)("/api/admin/rate-limit/status?scope=admin",e,{refreshInterval:1e4}),l=(0,d.useMemo)(()=>Array.isArray(i?.items)?i.items:[],[i]),m=a?.counts||{},[n,o]=(0,d.useState)(null),{data:p}=(0,c.default)(n?`/api/admin/queue/job/${n}`:null,e),q=(0,d.useCallback)(async a=>{await fetch(`/api/admin/queue/job/${a}/retry`,{method:"POST"}),j(),f()},[j,f]),r=(0,d.useCallback)(async a=>{await fetch(`/api/admin/queue/job/${a}`,{method:"DELETE"}),j(),f(),o(null)},[j,f]);return(0,b.jsxs)("div",{className:"p-6",children:[(0,b.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Admin Queue Dashboard"}),(0,b.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4 mb-6",children:["waiting","active","completed","failed","delayed","paused"].map(a=>(0,b.jsxs)("div",{className:"rounded-xl bg-white/5 dark:bg-black/20 backdrop-blur-lg p-4 border border-white/10",children:[(0,b.jsx)("div",{className:"text-sm opacity-70",children:a}),(0,b.jsx)("div",{className:"text-2xl font-bold",children:m[a]??0})]},a))}),(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)("label",{className:"text-sm",children:"Status"}),(0,b.jsx)("select",{className:"px-3 py-2 rounded border border-white/10 bg-black/20",value:g,onChange:a=>h(a.target.value),children:["waiting","active","completed","failed","delayed","paused"].map(a=>(0,b.jsx)("option",{value:a,children:a},a))})]}),(0,b.jsx)("div",{className:"rounded-xl bg-white/5 dark:bg-black/20 backdrop-blur-lg border border-white/10",children:(0,b.jsxs)("table",{className:"w-full text-sm",children:[(0,b.jsx)("thead",{className:"text-left",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"p-3",children:"ID"}),(0,b.jsx)("th",{className:"p-3",children:"Name"}),(0,b.jsx)("th",{className:"p-3",children:"Progress"}),(0,b.jsx)("th",{className:"p-3",children:"State"}),(0,b.jsx)("th",{className:"p-3",children:"Updated"})]})}),(0,b.jsxs)("tbody",{children:[l.map(a=>(0,b.jsxs)("tr",{className:"cursor-pointer hover:bg-white/10",onClick:()=>o(String(a.id)),children:[(0,b.jsx)("td",{className:"p-3 font-mono text-xs",children:a.id}),(0,b.jsx)("td",{className:"p-3",children:a.name}),(0,b.jsx)("td",{className:"p-3",children:"number"==typeof a.progress?`${a.progress}%`:""}),(0,b.jsx)("td",{className:"p-3",children:a.state}),(0,b.jsx)("td",{className:"p-3",children:a.processedOn?new Date(a.processedOn).toLocaleString():""})]},a.id)),0===l.length&&(0,b.jsx)("tr",{children:(0,b.jsx)("td",{className:"p-3",colSpan:5,children:"No jobs"})})]})]})}),(0,b.jsxs)("div",{className:"mt-8",children:[(0,b.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Admin Rate-Limit Buckets"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[(Array.isArray(k?.items)?k.items:[]).map(a=>(0,b.jsxs)("div",{className:"rounded-xl bg-white/5 dark:bg-black/20 backdrop-blur-lg p-4 border border-white/10",children:[(0,b.jsx)("div",{className:"font-mono text-xs mb-1",children:a.key}),(0,b.jsxs)("div",{className:"text-sm",children:["Tokens: ",a.tokens]}),(0,b.jsxs)("div",{className:"text-xs opacity-70",children:["Ts: ",a.timestamp]})]},a.key)),0===(Array.isArray(k?.items)?k.items:[]).length&&(0,b.jsx)("div",{className:"text-sm opacity-70",children:"No buckets"})]})]}),n&&p&&(0,b.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center",onClick:()=>o(null),children:(0,b.jsxs)("div",{className:"max-w-2xl w-full rounded-xl bg-white/5 dark:bg-black/30 border border-white/10 p-6",onClick:a=>a.stopPropagation(),children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsxs)("h3",{className:"text-lg font-semibold",children:["Job ",p.id]}),(0,b.jsx)("button",{className:"px-3 py-1 rounded bg-white/10",onClick:()=>o(null),children:"Close"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-4 text-sm",children:[(0,b.jsxs)("div",{children:["State: ",p.state]}),(0,b.jsxs)("div",{children:["Progress: ","number"==typeof p.progress?`${p.progress}%`:""]}),(0,b.jsxs)("div",{children:["Attempts: ",p.attemptsMade]}),(0,b.jsxs)("div",{children:["Processed: ",p.processedOn?new Date(p.processedOn).toLocaleString():""]}),(0,b.jsxs)("div",{children:["Finished: ",p.finishedOn?new Date(p.finishedOn).toLocaleString():""]})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("div",{className:"text-sm opacity-70 mb-1",children:"Data"}),(0,b.jsx)("pre",{className:"text-xs bg-black/30 rounded p-3 overflow-auto max-h-40",children:JSON.stringify(p.data,null,2)})]}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("div",{className:"text-sm opacity-70 mb-1",children:"Logs"}),(0,b.jsxs)("div",{className:"space-y-2 max-h-40 overflow-auto",children:[Array.isArray(p.logs)&&p.logs.map((a,c)=>(0,b.jsx)("div",{className:"text-xs bg-black/30 rounded p-2",children:JSON.stringify(a)},c)),(!p.logs||0===p.logs.length)&&(0,b.jsx)("div",{className:"text-xs opacity-70",children:"No logs"})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("button",{className:"px-4 py-2 rounded bg-green-600",onClick:()=>q(String(p.id)),children:"Retry"}),(0,b.jsx)("button",{className:"px-4 py-2 rounded bg-red-600",onClick:()=>r(String(p.id)),children:"Remove"})]})]})})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__ab023e9e._.js.map