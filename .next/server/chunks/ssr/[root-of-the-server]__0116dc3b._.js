module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},75050,a=>{"use strict";var b=a.i(8171),c=a.i(27669),d=a.i(76165);function e({children:a}){let[e,f]=(0,c.useState)("loading");return((0,c.useEffect)(()=>{let a=!0;return async function(){let{data:b}=await d.supabase.auth.getSession(),c=b.session?.user;if(!c){a&&f("noauth");return}let{data:e}=await d.supabase.from("profiles").select("role,is_admin").eq("user_id",c.id).maybeSingle(),g=!!e?.is_admin||"admin"===String(e?.role||"").toLowerCase();a&&f(g?"ok":"forbidden")}(),()=>{a=!1}},[]),"loading"===e)?(0,b.jsx)("div",{className:"p-6",children:"Checking permissionsâ€¦"}):"noauth"===e?(0,b.jsx)("div",{className:"p-6",children:"Sign in required."}):"forbidden"===e?(0,b.jsx)("div",{className:"p-6",children:"Not authorized."}):(0,b.jsx)(b.Fragment,{children:a})}a.s(["default",()=>e])},92238,a=>{"use strict";var b=a.i(79168),c=a.i(27068),d=a.i(32759),e=a.i(39141),f=a.i(67298),g=a.i(8171),h=a.i(27669),i=a.i(75050),j=a.i(76165);let k={trading:0,copy_trading:0,staking_yield:0,ads_tasks:0,ai:0};function l(){let[a,b]=(0,h.useState)(""),[c,d]=(0,h.useState)(k),[e,f]=(0,h.useState)(!1),[l,m]=(0,h.useState)("");async function n(){f(!0),m("");try{let{data:b}=await j.supabase.auth.getSession(),d=b.session?.access_token;if(!d)throw Error("Missing session token. Please sign in again.");let e=await fetch("/api/admin/performance",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({weekEnding:a,streamRois:c})}),f=await e.json();if(!e.ok)throw Error(f?.error||"Failed");m("Saved performance for "+a)}catch(a){m(a?.message||"Error")}finally{f(!1)}}return(0,g.jsx)(i.default,{children:(0,g.jsxs)("div",{className:"max-w-2xl mx-auto p-6",children:[(0,g.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Admin: Weekly Performance Streams"}),(0,g.jsxs)("div",{className:"mb-4",children:[(0,g.jsx)("label",{className:"block text-sm font-medium mb-1",children:"Week Ending"}),(0,g.jsx)("input",{type:"date",className:"w-full border rounded p-2",value:a,onChange:a=>b(a.target.value)})]}),(0,g.jsx)("div",{className:"grid grid-cols-1 gap-4",children:Object.keys(c).map(a=>(0,g.jsxs)("div",{children:[(0,g.jsxs)("label",{className:"block text-sm font-medium mb-1",children:[a.replace("_"," ").toUpperCase()," ROI %"]}),(0,g.jsx)("input",{type:"number",step:"0.01",className:"w-full border rounded p-2 text-black",value:c[a],onChange:b=>{var c;return c=b.target.value,void d(b=>({...b,[a]:Number(c)||0}))}})]},a))}),(0,g.jsx)("button",{className:"mt-6 bg-blue-600 text-white px-4 py-2 rounded",disabled:e||!a,onClick:n,children:e?"Saving...":"Save Performance"}),l&&(0,g.jsx)("p",{className:"mt-3 text-sm",children:l}),(0,g.jsx)("div",{className:"mt-8",children:(0,g.jsx)("p",{className:"text-xs text-gray-500",children:"Streams: Trading, Copy-Trading, Staking/Yield, Ads & Tasks, AI. Enter weekly ROI percentages per stream. Then trigger profit distribution via POST /api/admin/distribute-profits."})})]})})}a.s(["default",()=>l],71282);var m=a.i(71282),n=a.i(9193);let o=(0,d.hoist)(m,"default"),p=(0,d.hoist)(m,"getStaticProps"),q=(0,d.hoist)(m,"getStaticPaths"),r=(0,d.hoist)(m,"getServerSideProps"),s=(0,d.hoist)(m,"config"),t=(0,d.hoist)(m,"reportWebVitals"),u=(0,d.hoist)(m,"unstable_getStaticProps"),v=(0,d.hoist)(m,"unstable_getStaticPaths"),w=(0,d.hoist)(m,"unstable_getStaticParams"),x=(0,d.hoist)(m,"unstable_getServerProps"),y=(0,d.hoist)(m,"unstable_getServerSideProps"),z=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/admin/performance",pathname:"/admin/performance",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:m}),A=(0,n.getHandler)({srcPage:"/admin/performance",config:s,userland:m,routeModule:z,getStaticPaths:q,getStaticProps:p,getServerSideProps:r});a.s(["config",0,s,"default",0,o,"getServerSideProps",0,r,"getStaticPaths",0,q,"getStaticProps",0,p,"handler",0,A,"reportWebVitals",0,t,"routeModule",0,z,"unstable_getServerProps",0,x,"unstable_getServerSideProps",0,y,"unstable_getStaticParams",0,w,"unstable_getStaticPaths",0,v,"unstable_getStaticProps",0,u],92238)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__0116dc3b._.js.map