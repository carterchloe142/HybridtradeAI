module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},75050,a=>{"use strict";var b=a.i(8171),c=a.i(27669),d=a.i(76165);function e({children:a}){let[e,f]=(0,c.useState)("loading");return((0,c.useEffect)(()=>{let a=!0;return async function(){let{data:b}=await d.supabase.auth.getSession(),c=b.session?.user;if(!c){a&&f("noauth");return}let{data:e}=await d.supabase.from("profiles").select("role,is_admin").eq("user_id",c.id).maybeSingle(),g=!!e?.is_admin||"admin"===String(e?.role||"").toLowerCase();a&&f(g?"ok":"forbidden")}(),()=>{a=!1}},[]),"loading"===e)?(0,b.jsx)("div",{className:"p-6",children:"Checking permissions…"}):"noauth"===e?(0,b.jsx)("div",{className:"p-6",children:"Sign in required."}):"forbidden"===e?(0,b.jsx)("div",{className:"p-6",children:"Not authorized."}):(0,b.jsx)(b.Fragment,{children:a})}a.s(["default",()=>e])},58339,a=>{"use strict";var b=a.i(79168),c=a.i(27068),d=a.i(32759),e=a.i(39141),f=a.i(67298),g=a.i(8171),h=a.i(27669),i=a.i(75050);function j(){let[a,b]=(0,h.useState)([]),[c,d]=(0,h.useState)(!0),[e,f]=(0,h.useState)("");async function j(){d(!0);try{let a=await fetch("/api/transparency"),c=await a.json();if(!a.ok)throw Error(c.error||"Failed");let d=Array.isArray(c.reserves)?c.reserves:[];b(d)}catch(a){f(a.message)}finally{d(!1)}}return(0,h.useEffect)(()=>{j()},[]),(0,g.jsx)(i.default,{children:(0,g.jsxs)("div",{className:"max-w-5xl mx-auto p-6",children:[(0,g.jsx)("h1",{className:"text-2xl font-semibold mb-4",children:"Proof of Reserves"}),e&&(0,g.jsx)("p",{className:"mb-2 text-sm text-red-600",children:e}),c&&(0,g.jsx)("p",{className:"text-sm",children:"Loading…"}),(0,g.jsx)("div",{className:"overflow-auto",children:(0,g.jsxs)("table",{className:"min-w-full table-auto text-sm",children:[(0,g.jsx)("thead",{children:(0,g.jsxs)("tr",{className:"bg-gray-100 text-black",children:[(0,g.jsx)("th",{className:"px-2 py-1 text-left",children:"Currency"}),(0,g.jsx)("th",{className:"px-2 py-1 text-left",children:"Hot Wallet"}),(0,g.jsx)("th",{className:"px-2 py-1 text-left",children:"Cold Wallet"}),(0,g.jsx)("th",{className:"px-2 py-1 text-left",children:"Emergency Fund"}),(0,g.jsx)("th",{className:"px-2 py-1 text-left",children:"Total"}),(0,g.jsx)("th",{className:"px-2 py-1 text-left",children:"Updated"})]})}),(0,g.jsx)("tbody",{children:Array.isArray(a)&&a.map(a=>{let b=a.hotWallet+a.coldWallet;return(0,g.jsxs)("tr",{className:"border-t",children:[(0,g.jsx)("td",{className:"px-2 py-1 uppercase",children:a.currency}),(0,g.jsx)("td",{className:"px-2 py-1",children:a.hotWallet.toFixed(4)}),(0,g.jsx)("td",{className:"px-2 py-1",children:a.coldWallet.toFixed(4)}),(0,g.jsx)("td",{className:"px-2 py-1",children:a.emergencyFund.toFixed(4)}),(0,g.jsx)("td",{className:"px-2 py-1 font-medium",children:b.toFixed(4)}),(0,g.jsx)("td",{className:"px-2 py-1",children:new Date(a.updatedAt).toLocaleString()})]},a.currency)})})]})}),(0,g.jsx)("button",{onClick:j,className:"mt-4 bg-blue-600 text-white px-3 py-1 rounded text-sm",children:"Refresh"})]})})}a.s(["default",()=>j],94798);var k=a.i(94798),l=a.i(9193);let m=(0,d.hoist)(k,"default"),n=(0,d.hoist)(k,"getStaticProps"),o=(0,d.hoist)(k,"getStaticPaths"),p=(0,d.hoist)(k,"getServerSideProps"),q=(0,d.hoist)(k,"config"),r=(0,d.hoist)(k,"reportWebVitals"),s=(0,d.hoist)(k,"unstable_getStaticProps"),t=(0,d.hoist)(k,"unstable_getStaticPaths"),u=(0,d.hoist)(k,"unstable_getStaticParams"),v=(0,d.hoist)(k,"unstable_getServerProps"),w=(0,d.hoist)(k,"unstable_getServerSideProps"),x=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/admin/proof",pathname:"/admin/proof",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:k}),y=(0,l.getHandler)({srcPage:"/admin/proof",config:q,userland:k,routeModule:x,getStaticPaths:o,getStaticProps:n,getServerSideProps:p});a.s(["config",0,q,"default",0,m,"getServerSideProps",0,p,"getStaticPaths",0,o,"getStaticProps",0,n,"handler",0,y,"reportWebVitals",0,r,"routeModule",0,x,"unstable_getServerProps",0,v,"unstable_getServerSideProps",0,w,"unstable_getStaticParams",0,u,"unstable_getStaticPaths",0,t,"unstable_getStaticProps",0,s],58339)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__8c32ad70._.js.map