{"version":3,"sources":["turbopack:///[project]/components/RequireAuth.tsx"],"sourcesContent":["import { useEffect, useState } from 'react';\nimport { supabase } from '../lib/supabase';\nimport { useRouter } from 'next/router';\n\ntype Props = { children: React.ReactNode };\n\nexport default function RequireAuth({ children }: Props) {\n  const router = useRouter();\n  const [ready, setReady] = useState(false);\n\n  useEffect(() => {\n    let mounted = true;\n    supabase.auth.getSession().then((res: { data: { session: any } }) => {\n      const isAuthed = !!res.data?.session;\n      if (!isAuthed) {\n        router.replace('/auth/login');\n      } else if (mounted) {\n        setReady(true);\n      }\n    });\n    const { data: sub } = supabase.auth.onAuthStateChange((_event: any, session: any) => {\n      if (!session) router.replace('/auth/login');\n    });\n    return () => { sub?.subscription?.unsubscribe(); mounted = false; };\n  }, [router]);\n\n  if (!ready) {\n    return (\n      <div className=\"card-neon text-center\">\n        <p>Checking your session...</p>\n      </div>\n    );\n  }\n  return <>{children}</>;\n}\n"],"names":[],"mappings":"8MAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAIe,SAAS,EAAY,UAAE,CAAQ,CAAS,EACrD,IAAM,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAClB,CAAC,EAAO,EAAS,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAC,SAkBnC,CAhBA,CAAA,EAAA,AAgBI,EAhBJ,SAAS,AAAT,EAAU,KACR,IAAI,GAAU,EACd,EAAA,QAAQ,CAAC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,AAAC,IACZ,EAAI,IAAI,EAAE,QAGlB,GACT,GAAS,GAFT,AACkB,EADX,OAAO,CAAC,cAInB,GACA,GAAM,CAAE,KAAM,CAAG,CAAE,CAAG,EAAA,QAAQ,CAAC,IAAI,CAAC,iBAAiB,CAAC,CAAC,EAAa,KAC9D,AAAC,GAAS,EAAO,OAAO,CAAC,cAC/B,GACA,MAAO,KAAQ,GAAK,cAAc,cAAe,EAAU,EAAO,CACpE,EAAG,CAAC,EAAO,EAEN,GAOE,CAAA,EAAA,CAPK,CAOL,GAAA,EAAA,EAAA,QAAA,CAAA,UAAG,IALN,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,iCACb,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,UAAE,8BAKX"}