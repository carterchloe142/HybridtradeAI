module.exports=[93695,(a,b,c)=>{b.exports=a.x("next/dist/shared/lib/no-fallback-error.external.js",()=>require("next/dist/shared/lib/no-fallback-error.external.js"))},98527,a=>{"use strict";var b=a.i(8171),c=a.i(27669),d=a.i(76165),e=a.i(41910);function f({children:a}){let f=(0,e.useRouter)(),[g,h]=(0,c.useState)(!1);return((0,c.useEffect)(()=>{let a=!0;d.supabase.auth.getSession().then(b=>{b.data?.session?a&&h(!0):f.replace("/auth/login")});let{data:b}=d.supabase.auth.onAuthStateChange((a,b)=>{b||f.replace("/auth/login")});return()=>{b?.subscription?.unsubscribe(),a=!1}},[f]),g)?(0,b.jsx)(b.Fragment,{children:a}):(0,b.jsx)("div",{className:"card-neon text-center",children:(0,b.jsx)("p",{children:"Checking your session..."})})}a.s(["default",()=>f])},94139,a=>{"use strict";var b=a.i(76165);async function c(){let{data:a}=await b.supabase.auth.getSession();return a.session?.user?.id??null}async function d(a){let{data:c,error:d}=await b.supabase.from("wallets").select("id,user_id,currency,balance").eq("user_id",a),e=c??[];if(!d&&e.length>0)return e;try{let{data:a}=await b.supabase.auth.getSession(),c=a.session?.access_token;if(!c)return e;let d=await fetch(`/api/user/wallets?ts=${Date.now()}`,{headers:{Authorization:`Bearer ${c}`},cache:"no-store"});if(!d.ok)return e;return(await d.json()).wallets??[]}catch{return e}}async function e(a){let{data:c,error:d}=await b.supabase.from("investments").select("id,user_id,plan_id,amount_usd,status").eq("user_id",a);return d?[]:c??[]}async function f(a){let{data:c}=await b.supabase.from("referrals").select("code,total_earnings").eq("user_id",a).limit(1).maybeSingle();return c??null}a.s(["getCurrentUserId",()=>c,"getReferralByUser",()=>f,"getUserInvestments",()=>e,"getUserWallets",()=>d])},19125,a=>{"use strict";let b=[{id:"starter",name:"Starter",description:"Entry plan allocating 70% Ads & Tasks and 30% Trading.",weeklyRoi:30,features:["70% Ads & Tasks","30% Trading","Task bonuses available"]},{id:"pro",name:"Pro",description:"Balanced plan: 60% Trading, 25% Copy-Trading, 15% Ads & Tasks.",weeklyRoi:35,features:["60% Trading","25% Copy-Trading","15% Ads & Tasks","Premium education content"]},{id:"elite",name:"Elite",description:"High-tier: 50% Trading, 30% Staking/Yield, 20% AI/Copy-Trading.",weeklyRoi:40,features:["Priority withdrawals","Beta access to new features","50% Trading","30% Staking/Yield","20% AI/Copy-Trading"]}];function c(a,c){let d=b.find(a=>a.id===c);return d?Number((a*(d.weeklyRoi/100)).toFixed(2)):0}a.s(["PLANS",0,b,"calculateWeeklyROI",()=>c])},78655,a=>{"use strict";var b=a.i(79168),c=a.i(27068),d=a.i(32759),e=a.i(39141),f=a.i(67298),g=a.i(8171),h=a.i(1257),i=a.i(41910),j=a.i(64375);let k=[{href:"/dashboard",label:"Dashboard",icon:(0,j.default)("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]])},{href:"/plans",label:"Plans",icon:(0,j.default)("Wallet",[["path",{d:"M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1",key:"18etb6"}],["path",{d:"M3 5v14a2 2 0 0 0 2 2h15a1 1 0 0 0 1-1v-4",key:"xoc0q4"}]])},{href:"/profile",label:"Profile",icon:(0,j.default)("UserRound",[["circle",{cx:"12",cy:"8",r:"5",key:"1hypcn"}],["path",{d:"M20 21a8 8 0 0 0-16 0",key:"rfgkzh"}]])}];function l(){let a=(0,i.useRouter)();return(0,g.jsx)("aside",{className:"glass w-full md:w-64 rounded-2xl p-4 h-fit md:h-[calc(100vh-120px)]",children:(0,g.jsx)("nav",{className:"flex md:flex-col gap-3",children:k.map(({href:b,label:c,icon:d})=>{let e=a.pathname===b;return(0,g.jsxs)(h.default,{href:b,className:`flex items-center gap-2 px-3 py-2 rounded-lg ${e?"bg-white/10 text-neon-blue":"hover:bg-white/10"}`,children:[(0,g.jsx)(d,{size:18}),(0,g.jsx)("span",{children:c})]},b)})})})}function m({title:a,value:b,sublabel:c}){return(0,g.jsxs)("div",{className:"card-neon",children:[(0,g.jsx)("div",{className:"text-sm text-white/70",children:a}),(0,g.jsx)("div",{className:"mt-2 text-2xl font-semibold",children:b}),c&&(0,g.jsx)("div",{className:"mt-1 text-xs text-white/60",children:c})]})}var n=a.i(98527),o=a.i(27669);let p={USD:1,EUR:.92,NGN:1550,BTC:1/65e3,ETH:1/3500};var q=a.i(19125),r=a.i(94139),s=a.i(76165),t=a.i(66223);function u(){let{currency:a,setCurrency:b,format:c,convertFromUSD:d,convertToUSD:e}=function(a="USD"){let[b,c]=(0,o.useState)(a),d=(0,o.useMemo)(()=>p[b]||1,[b]);return{currency:b,setCurrency:c,format:a=>{let c="USD"===b?"$":"EUR"===b?"€":"NGN"===b?"₦":"BTC"===b?"₿":"Ξ";return`${c}${a.toFixed("USD"===b||"EUR"===b||"NGN"===b?2:6)}`},convertFromUSD:a=>a*d,convertToUSD:(a,b)=>a/(p[b]||1),rate:d}}("USD"),[f,h]=(0,o.useState)(0),[i,j]=(0,o.useState)(0),[k,u]=(0,o.useState)(0),[v,w]=(0,o.useState)(0),[x,y]=(0,o.useState)(0),[z,A]=(0,o.useState)(0),[B,C]=(0,o.useState)(0),D=(0,o.useRef)(null),{items:E}=(0,t.useUserNotifications)(),[F,G]=(0,o.useState)(""),[H,I]=(0,o.useState)("flutterwave"),[J,K]=(0,o.useState)("starter"),[L,M]=(0,o.useState)(""),[N,O]=(0,o.useState)(""),[P,Q]=(0,o.useState)(""),R=(0,o.useMemo)(()=>E[0],[E]);return(0,o.useEffect)(()=>{if(!R)return;let a=String(R?.type||"");("manual_credit"===a||"profit"===a||"investment_status"===a||"withdrawal_status"===a)&&C(a=>a+1)},[R]),(0,o.useEffect)(()=>{!async function(){let c=await (0,r.getCurrentUserId)();if(!c)return;D.current=c;try{let{data:a}=await s.supabase.from("profiles").select("currency").eq("user_id",c).maybeSingle(),d=a?.currency||"USD";b(a=>a||d)}catch{}let[d,f]=await Promise.all([(0,r.getUserWallets)(c),(0,r.getUserInvestments)(c)]);h(Number(d.filter(b=>b.currency===a).reduce((a,b)=>a+(Number(b.balance)||0),0).toFixed(2))),j(Number(d.reduce((a,b)=>a+e(Number(b.balance)||0,b.currency),0).toFixed(2)));let g=f.filter(a=>"active"===a.status),i=g.reduce((a,b)=>a+b.amount_usd,0);u(i),w(Number((.12*i).toFixed(2)));let k=(0,q.calculateWeeklyROI)(i,g[0]?.plan_id||"starter");A(k),y(Number((.05*k).toFixed(2)))}()},[a,B]),(0,o.useEffect)(()=>{(async()=>{let a=await (0,r.getCurrentUserId)();if(!a)return;D.current=a;let b=s.supabase.channel(`wallets_user_${a}`).on("postgres_changes",{event:"*",schema:"public",table:"wallets",filter:`user_id=eq.${a}`},()=>{C(a=>a+1)}).subscribe();return()=>{try{b.unsubscribe()}catch{}}})()},[]),(0,g.jsx)(n.default,{children:(0,g.jsxs)("div",{className:"grid md:grid-cols-[auto,1fr] gap-6",children:[(0,g.jsx)(l,{}),(0,g.jsxs)("div",{className:"space-y-6",children:[(0,g.jsxs)("div",{className:"glass rounded-2xl p-4 flex items-center justify-between",children:[(0,g.jsx)("h2",{className:"text-xl font-bold neon-text",children:"Overview"}),(0,g.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,g.jsx)("label",{className:"text-white/70",children:"Currency:"}),(0,g.jsx)("select",{className:"input-neon w-32",value:a,onChange:a=>b(a.target.value),children:["USD","EUR","NGN","BTC","ETH"].map(a=>(0,g.jsx)("option",{value:a,children:a},a))})]})]}),(0,g.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6",children:[(0,g.jsx)(m,{title:"Wallet balance (selected)",value:c(f)}),(0,g.jsx)(m,{title:"All wallets total (USD)",value:`$${i.toFixed(2)}`}),(0,g.jsx)(m,{title:`All wallets total (${a})`,value:c(d(i))}),(0,g.jsx)(m,{title:"Invested amount (active in pool)",value:c(d(k))}),(0,g.jsx)(m,{title:"Withdrawable profits",value:c(d(v))}),(0,g.jsx)(m,{title:"Referral earnings",value:c(d(x))}),(0,g.jsx)(m,{title:"Estimated weekly ROI",value:c(d(z)),sublabel:"Based on current plan"})]}),(0,g.jsxs)("div",{className:"glass rounded-2xl p-4",children:[(0,g.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,g.jsx)("h3",{className:"text-lg font-semibold neon-text",children:"Actions"}),N&&(0,g.jsx)("span",{className:`text-sm ${P?"text-red-500":"text-green-500"}`,children:N})]}),(0,g.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,g.jsx)("div",{className:"space-y-3",children:(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)("input",{className:"input-neon flex-1",type:"number",step:"0.01",placeholder:"Deposit amount",value:F,onChange:a=>G(a.target.value)}),(0,g.jsxs)("select",{className:"input-neon w-36",value:H,onChange:a=>I(a.target.value),children:[(0,g.jsx)("option",{value:"flutterwave",children:"Flutterwave"}),(0,g.jsx)("option",{value:"paystack",children:"Paystack"}),(0,g.jsx)("option",{value:"crypto",children:"Crypto"})]}),(0,g.jsxs)("select",{className:"input-neon w-36",value:J,onChange:a=>K(a.target.value),children:[(0,g.jsx)("option",{value:"starter",children:"Starter"}),(0,g.jsx)("option",{value:"pro",children:"Pro"}),(0,g.jsx)("option",{value:"elite",children:"Elite"})]}),(0,g.jsx)("button",{className:"btn-neon",onClick:async()=>{Q(""),O("");let b=D.current,c=Number(F);if(!b||!c||c<=0){Q("Invalid deposit"),O("");return}try{let d=await fetch("/api/deposit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:b,amount:c,currency:a,provider:H,planId:J})}),e=await d.json();if(!d.ok){Q(String(e?.error||"Failed")),O("");return}O(String(e?.message||"Deposit recorded")),G(""),C(a=>a+1)}catch(a){Q(String(a?.message||"Error"))}},children:"Deposit"})]})}),(0,g.jsx)("div",{className:"space-y-3",children:(0,g.jsxs)("div",{className:"flex items-center gap-2",children:[(0,g.jsx)("input",{className:"input-neon flex-1",type:"number",step:"0.01",placeholder:"Withdraw amount",value:L,onChange:a=>M(a.target.value)}),(0,g.jsx)("button",{className:"btn-neon",onClick:async()=>{Q(""),O("");let b=D.current,c=Number(L);if(!b||!c||c<=0){Q("Invalid withdraw"),O("");return}try{let d=await fetch("/api/withdraw",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:b,amount:c,currency:a,cycleActive:!1})}),e=await d.json();if(202===d.status){O(String(e?.message||"Request submitted")),M("");return}if(!d.ok){Q(String(e?.error||"Failed")),O("");return}O(String(e?.message||"Withdrawal recorded")),M(""),C(a=>a+1)}catch(a){Q(String(a?.message||"Error"))}},children:"Withdraw"})]})})]})]}),(0,g.jsxs)("div",{className:"card-neon",children:[(0,g.jsx)("h3",{className:"font-semibold neon-text",children:"AI Assistant"}),(0,g.jsx)("p",{className:"mt-2 text-sm text-white/80",children:"Live responses will appear here. Use the floating chatbot for now."})]})]})]})})}a.s(["default",()=>u],28009);var v=a.i(28009),w=a.i(9193);let x=(0,d.hoist)(v,"default"),y=(0,d.hoist)(v,"getStaticProps"),z=(0,d.hoist)(v,"getStaticPaths"),A=(0,d.hoist)(v,"getServerSideProps"),B=(0,d.hoist)(v,"config"),C=(0,d.hoist)(v,"reportWebVitals"),D=(0,d.hoist)(v,"unstable_getStaticProps"),E=(0,d.hoist)(v,"unstable_getStaticPaths"),F=(0,d.hoist)(v,"unstable_getStaticParams"),G=(0,d.hoist)(v,"unstable_getServerProps"),H=(0,d.hoist)(v,"unstable_getServerSideProps"),I=new b.PagesRouteModule({definition:{kind:c.RouteKind.PAGES,page:"/dashboard",pathname:"/dashboard",bundlePath:"",filename:""},distDir:".next",relativeProjectDir:"",components:{App:f.default,Document:e.default},userland:v}),J=(0,w.getHandler)({srcPage:"/dashboard",config:B,userland:v,routeModule:I,getStaticPaths:z,getStaticProps:y,getServerSideProps:A});a.s(["config",0,B,"default",0,x,"getServerSideProps",0,A,"getStaticPaths",0,z,"getStaticProps",0,y,"handler",0,J,"reportWebVitals",0,C,"routeModule",0,I,"unstable_getServerProps",0,G,"unstable_getServerSideProps",0,H,"unstable_getStaticParams",0,F,"unstable_getStaticPaths",0,E,"unstable_getStaticProps",0,D],78655)}];

//# sourceMappingURL=%5Broot-of-the-server%5D__b5a14e6b._.js.map